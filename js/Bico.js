var matched,browser;(window.console||(window.console={log:function(){},error:function(){}},$.browser.opera&&window.opera&&window.opera.postError&&(window.console.log=window.console.error=function(t){window.opera.postError(t)})),Bc=Bico={_loadedScripts:{},page:{},widget:{},options:{},_isPageLoaded:!1,_isBrowserTabActive:!0,errorsLogged:0,logError:function(t){this.errorsLogged>10||(this.errorsLogged++,Bc.Ajax({url:"/index/ajax-log-js-error",data:{location:location.toString(),error:t.toString(),message:t.message,stack:t.stack,filename:t.filename,lineno:t.lineno,colno:t.colno,userAgent:navigator.userAgent}}))},intInString:function(t,e,o){for(i in arr=t.split(e),arr)if(arr[i].search(o)>-1)return arr[i].replace(/(\D)+/,"");return!1},onLoad:function(){$(window).focus($.proxy((function(){this._isBrowserTabActive=!0}),this)),$(window).blur($.proxy((function(){this._isBrowserTabActive=!1}),this)),this._saveGoogleAnalyticsClientId(),this._addCopyLogger(),this._addPasswordToggle(),this.page.onLoad&&this.page.onLoad()},_addPasswordToggle:function(){$(document).on("click","span.toggle-password",(function(){$(this).toggleClass("icon-eye icon-eye-slash");let t=$(this).prev();"password"==t.attr("type")?t.attr("type","text"):t.attr("type","password")}))},_addCopyLogger:function(){$(document).on("copy",(function(t){let e=t.originalEvent||{},i=[];for(const t in e.path){let o=e.path[t],n=o.tagName.toLowerCase();if("body"==n)break;n+=o.id?"#"+o.id:"",n+=o.className?"."+o.className.replace(/\s+/,"."):"",i.push(n)}Bc.Ajax({url:"/index/ajax-register-copy-on-site/",indicate:!1,data:{page:location.pathname+location.search+location.hash,path:i.join(","),html:$(t.target).outerHTML()}})}))},_saveGoogleAnalyticsClientId:function(){if(!window.Bc_employee_id)return;let t=this;this._setGaKeyTimer=setInterval((function(){window.ga&&(clearInterval(t._setGaKeyTimer),window.ga((function(){let t=window.ga.getAll()[0].get("clientId"),e={};localStorage.sentGaClientIds&&(e=Bc.Array.codeToObj(localStorage.sentGaClientIds)||{}),!e[t]&&t&&Bc.Ajax({url:"/login/ajax-register-ga-client-id",data:{gaClientId:t},indicate:!1,success:function(){e[t]=!0,localStorage.sentGaClientIds=Bc.Array.objToCode(e)}})})))}),300)},getUID:function(){return this._uniqueIdCounter=this._uniqueIdCounter||0,"bc_unique_id_"+Number(new Date)+this._uniqueIdCounter++},include:function(t){this._included=this._included||{},this._included[t]&&console.error('Duplicate including on "'+t+'" file.'),this._included[t]=!0,document.write('<script type="text/javascript" src="'+this._getScriptFullSrc(t)+'"><\/script>')},loadScript:function(t,e){var i=this._loadedScripts[t]=this._loadedScripts[t]||{state:"notLoaded",handlers:[]};"notLoaded"==i.state?(i.handlers.push(e),i.state="loading",this._loadScriptSys(t,(function(){i.state="loaded";for(var t=0;t<i.handlers.length;t++)i.handlers[t]()}))):"loading"==i.state?i.handlers.push(e):"loaded"==i.state&&e()},loadList:function(t,e){for(var i=0,o=!1,n=0;n<t.length;n++)i++,this.loadScript(t[n],(function(){0===--i&&o&&e()}));o=!0,0===i&&o&&e()},moveToPageWithPostData:function(t,e){let i=[],o="moveToPageWithPostDataForm";e=Bc.Array.toFlatArray(e),i.push('<form action="'+t+'" method="post" id="'+o+'">');for(let t in e)if(e.hasOwnProperty(t)){var n=e[t];if("object"!=typeof n)i.push('<input name="'+t+'" value="'+n+'" type="hidden"/>');else for(var a in n)i.push('<input name="'+t+"["+a+']" value="'+n[a]+'" type="hidden"/>')}i.push("</form>"),$("body").append(i.join("")),$("#"+o).get(0).submit()},timeCheck:function(t,e){if(this._timeCheck=this._timeCheck||{},this._timeCheckFull=this._timeCheckFull||{},this._timeCheckFull[t]=this._timeCheckFull[t]||0,"begin"==e)this._timeCheck[t]=(new Date).getTime();else{var i=(new Date).getTime()-this._timeCheck[t];this._timeCheckFull[t]+=i}},decline:function(t,e,i,o){var n=(t=t.toString()).substring(t.length-1),a=t.substring(t.length-2);return 1==n&&11!=a?e:n>1&&n<5&&(a<10||a>20)?i:o},getModuleName:function(){return location.pathname.replace(/^\//,"").split("/")[0]},isPageLoaded:function(){return this._isPageLoaded},scrollTo:function(t,e){0===e?$(window).scrollTop($(t).offset().top):$("html, body").animate({scrollTop:$(t).offset().top},e||500)},yaReachGoal:function(t,e){try{let i=(t="string"==typeof t?{name:t}:t).name.replace(/[^\w-]/u,"_"),o=t.options||{};if(e=e||function(){},window.Bc_isDevMode)return void e.call();window.ym?window.ym(window.yandexMetricId,"reachGoal",i,o,e):e.call()}catch(t){Bc.logError(t)}},yaVisitParams:function(t,e){try{if(e=e||function(){},window.Bc_isDevMode)return void e.call();window.ym?window.ym(window.yandexMetricId,"params",t):console.log("yaVisitParams, no yandex counter object:",t),e.call()}catch(t){Bc.logError(t)}},yaUserParams:function(t,e){try{if(e=e||function(){},window.Bc_isDevMode)return void e.call();window.ym?window.ym(window.yandexMetricId,"userParams",t):console.log("yaUserParams, no yandex counter object:",t),e.call()}catch(t){Bc.logError(t)}},yaGetClientId:function(t,e=!0){let i=this;try{window.Bc_isDevMode?t.call({},1):this.yandexClientId?t.call({},this.yandexClientId):window.ym?(window.ym(window.yandexMetricId,"getClientID",(function(e){i.yandexClientId=e,t.call({},e)})),setTimeout((function(){i.yandexClientId||t.call({},"unknown")}),5e3)):e?setTimeout((function(){i.yaGetClientId(t,!1)}),2e3):t.call({},"noCounter")}catch(t){Bc.logError(t)}},trackMailRuEvent:function(t,e){e=e||function(){},window.Bc_isDevMode||window._tmr.push({id:"3124546",type:"reachGoal",goal:"bicomytarget"}),e.call()},numberFormat:function(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,"&nbsp;")},isBrowserTabActive:function(){return document.hasFocus?document.hasFocus():this._isBrowserTabActive},_getScriptFullSrc:function(t){if(t&&t.match(/^http.*$/))return t;var e=t.split(".").pop();if("/"==t.charAt(0))var i=t;else if("css"==e)i="/css/"+t;else i="/js/"+t;if(window.Bc_deployData&&window.Bc_deployData.staticFileMd5&&window.Bc_deployData.staticFileMd5[i]&&!location.href.match("debug-js")){let t=window.Bc_deployData.staticFileMd5[i];i=(i=(i=i.replace(/^\/css\//,"/generated-css/")).replace(/^\/js\//,"/generated-js/"))+"?"+t}else window.Bc_deployData||(i=i+"?"+(new Date).getTime());return(void 0!==window.domain&&"object"!=typeof window.domain?window.domain:"")+i},_loadScriptSys:function(t,e){var i=this._getScriptFullSrc(t);if("css"==(t&&t.split(".").pop())){var o=$("<link>");$("head").append(o),o.attr({rel:"stylesheet",type:"text/css",href:i}),e()}else{var n=!1,a=document.getElementsByTagName("head")[0]||document.documentElement,r=document.createElement("script");r.src=i,r.onload=r.onreadystatechange=function(){n||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(n=!0,e(),r.onload=r.onreadystatechange=null,a&&r.parentNode&&a.removeChild(r))},a.appendChild(r)}}},jQuery.fn.jsAttr=function(t){var e=this.attr("class");if(!e)return"";var i=e.match(new RegExp("js-"+t+"-'([^']*)'"))||e.match(new RegExp("js-"+t+"-([^\\s]*)"));return i?i[1]:""},jQuery.fn.center=function(){var t=$(window);return this.css({position:"absolute",top:(t.height()-this.height())/2+t.scrollTop()+"px",left:(t.width()-this.width())/2+t.scrollLeft()+"px"}),this},jQuery.fn.outerHTML=function(){return $(this).clone().wrap("<div></div>").parent().html()},jQuery.fn.toggleTo=function(t){t?$(this).show():$(this).hide()},jQuery.fn.toggleClassTo=function(t,e){e?$(this).addClass(t):$(this).removeClass(t)},jQuery.fn.getValue=function(){if($(this).hasClass("js-widget-FormElementTreeSelect")){let t=$(this).data("bcWidget");return t.multiSelect?t.getValue():t.getValue()[0]}return $(this).val()},jQuery.fn.setValue=function(t){if(!$(this).hasClass("js-widget-FormElementTreeSelect"))return $(this).val(t);$(this).data("bcWidget").setValue(t)}
/*!
 * jQuery Form Plugin
 * version: 4.2.1
 * Requires jQuery v1.7 or later
 * Copyright 2017 Kevin Morris
 * Copyright 2006 M. Alsup
 * Project repository: https://github.com/jquery-form/form
 * Dual licensed under the MIT and LGPLv3 licenses.
 * https://github.com/jquery-form/form#license
 */,function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof module&&module.exports?module.exports=function(e,i){return void 0===i&&(i="undefined"!=typeof window?require("jquery"):require("jquery")(e)),t(i),i}:t(jQuery)}((function(t){"use strict";function e(e){var i=e.data;e.isDefaultPrevented()||(e.preventDefault(),t(e.target).closest("form").ajaxSubmit(i))}function i(e){var i=e.target,o=t(i);if(!o.is("[type=submit],[type=image]")){var n=o.closest("[type=submit]");if(0===n.length)return;i=n[0]}var a=i.form;if(a.clk=i,"image"===i.type)if(void 0!==e.offsetX)a.clk_x=e.offsetX,a.clk_y=e.offsetY;else if("function"==typeof t.fn.offset){var r=o.offset();a.clk_x=e.pageX-r.left,a.clk_y=e.pageY-r.top}else a.clk_x=e.pageX-i.offsetLeft,a.clk_y=e.pageY-i.offsetTop;setTimeout((function(){a.clk=a.clk_x=a.clk_y=null}),100)}function o(){if(t.fn.ajaxSubmit.debug){var e="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(e):window.opera&&window.opera.postError&&window.opera.postError(e)}}var n={};n.fileapi=void 0!==t('<input type="file">').get(0).files,n.formdata=void 0!==window.FormData;var a=!!t.fn.prop;t.fn.attr2=function(){if(!a)return this.attr.apply(this,arguments);var t=this.prop.apply(this,arguments);return t&&t.jquery||"string"==typeof t?t:this.attr.apply(this,arguments)},t.fn.ajaxSubmit=function(e,i,r,s){function l(i){function n(t){var e=null;try{t.contentWindow&&(e=t.contentWindow.document)}catch(t){o("cannot get iframe.contentWindow document: "+t)}if(e)return e;try{e=t.contentDocument?t.contentDocument:t.document}catch(i){o("cannot get iframe.contentDocument: "+i),e=t.document}return e}function r(){var e=h.attr2("target"),i=h.attr2("action"),a=h.attr("enctype")||h.attr("encoding")||"multipart/form-data";T.setAttribute("target",p),c&&!/post/i.test(c)||T.setAttribute("method","POST"),i!==u.url&&T.setAttribute("action",u.url),u.skipEncodingOverride||c&&!/post/i.test(c)||h.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),u.timeout&&(_=setTimeout((function(){x=!0,s(1)}),u.timeout));var r=[];try{if(u.extraData)for(var l in u.extraData)u.extraData.hasOwnProperty(l)&&(t.isPlainObject(u.extraData[l])&&u.extraData[l].hasOwnProperty("name")&&u.extraData[l].hasOwnProperty("value")?r.push(t('<input type="hidden" name="'+u.extraData[l].name+'">',$).val(u.extraData[l].value).appendTo(T)[0]):r.push(t('<input type="hidden" name="'+l+'">',$).val(u.extraData[l]).appendTo(T)[0]));u.iframeTarget||g.appendTo(C),v.attachEvent?v.attachEvent("onload",s):v.addEventListener("load",s,!1),setTimeout((function t(){try{var e=n(v).readyState;o("state = "+e),e&&"uninitialized"===e.toLowerCase()&&setTimeout(t,50)}catch(e){o("Server abort: ",e," (",e.name,")"),s(2),_&&clearTimeout(_),_=void 0}}),15);try{T.submit()}catch(t){document.createElement("form").submit.apply(T)}}finally{T.setAttribute("action",i),T.setAttribute("enctype",a),e?T.setAttribute("target",e):h.removeAttr("target"),t(r).remove()}}function s(e){if(!y.aborted&&!D){if((B=n(v))||(o("cannot access response document"),e=2),1===e&&y)return y.abort("timeout"),void j.reject(y,"timeout");if(2===e&&y)return y.abort("server abort"),void j.reject(y,"error","server abort");if(B&&B.location.href!==u.iframeSrc||x){v.detachEvent?v.detachEvent("onload",s):v.removeEventListener("load",s,!1);var i,a="success";try{if(x)throw"timeout";var r="xml"===u.dataType||B.XMLDocument||t.isXMLDoc(B);if(o("isXml="+r),!r&&window.opera&&(null===B.body||!B.body.innerHTML)&&--A)return o("requeing onLoad callback, DOM not available"),void setTimeout(s,250);var l=B.body?B.body:B.documentElement;y.responseText=l?l.innerHTML:null,y.responseXML=B.XMLDocument?B.XMLDocument:B,r&&(u.dataType="xml"),y.getResponseHeader=function(t){return{"content-type":u.dataType}[t.toLowerCase()]},l&&(y.status=Number(l.getAttribute("status"))||y.status,y.statusText=l.getAttribute("statusText")||y.statusText);var c=(u.dataType||"").toLowerCase(),d=/(json|script|text)/.test(c);if(d||u.textarea){var h=B.getElementsByTagName("textarea")[0];if(h)y.responseText=h.value,y.status=Number(h.getAttribute("status"))||y.status,y.statusText=h.getAttribute("statusText")||y.statusText;else if(d){var p=B.getElementsByTagName("pre")[0],m=B.getElementsByTagName("body")[0];p?y.responseText=p.textContent?p.textContent:p.innerText:m&&(y.responseText=m.textContent?m.textContent:m.innerText)}}else"xml"===c&&!y.responseXML&&y.responseText&&(y.responseXML=P(y.responseText));try{I=O(y,c,u)}catch(t){a="parsererror",y.error=i=t||a}}catch(t){o("error caught: ",t),a="error",y.error=i=t||a}y.aborted&&(o("upload aborted"),a=null),y.status&&(a=y.status>=200&&y.status<300||304===y.status?"success":"error"),"success"===a?(u.success&&u.success.call(u.context,I,"success",y),j.resolve(y.responseText,"success",y),f&&t.event.trigger("ajaxSuccess",[y,u])):a&&(void 0===i&&(i=y.statusText),u.error&&u.error.call(u.context,y,a,i),j.reject(y,"error",i),f&&t.event.trigger("ajaxError",[y,u,i])),f&&t.event.trigger("ajaxComplete",[y,u]),f&&! --t.active&&t.event.trigger("ajaxStop"),u.complete&&u.complete.call(u.context,y,a),D=!0,u.timeout&&clearTimeout(_),setTimeout((function(){u.iframeTarget?g.attr("src",u.iframeSrc):g.remove(),y.responseXML=null}),100)}}}var l,d,u,f,p,g,v,y,w,b,x,_,T=h[0],j=t.Deferred();if(j.abort=function(t){y.abort(t)},i)for(d=0;d<m.length;d++)l=t(m[d]),a?l.prop("disabled",!1):l.removeAttr("disabled");(u=t.extend(!0,{},t.ajaxSettings,e)).context=u.context||u,p="jqFormIO"+(new Date).getTime();var $=T.ownerDocument,C=h.closest("body");if(u.iframeTarget?(b=(g=t(u.iframeTarget,$)).attr2("name"))?p=b:g.attr2("name",p):(g=t('<iframe name="'+p+'" src="'+u.iframeSrc+'" />',$)).css({position:"absolute",top:"-1000px",left:"-1000px"}),v=g[0],y={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(e){var i="timeout"===e?"timeout":"aborted";o("aborting upload... "+i),this.aborted=1;try{v.contentWindow.document.execCommand&&v.contentWindow.document.execCommand("Stop")}catch(t){}g.attr("src",u.iframeSrc),y.error=i,u.error&&u.error.call(u.context,y,i,e),f&&t.event.trigger("ajaxError",[y,u,i]),u.complete&&u.complete.call(u.context,y,i)}},(f=u.global)&&0==t.active++&&t.event.trigger("ajaxStart"),f&&t.event.trigger("ajaxSend",[y,u]),u.beforeSend&&!1===u.beforeSend.call(u.context,y,u))return u.global&&t.active--,j.reject(),j;if(y.aborted)return j.reject(),j;(w=T.clk)&&(b=w.name)&&!w.disabled&&(u.extraData=u.extraData||{},u.extraData[b]=w.value,"image"===w.type&&(u.extraData[b+".x"]=T.clk_x,u.extraData[b+".y"]=T.clk_y));var S=t("meta[name=csrf-token]").attr("content"),k=t("meta[name=csrf-param]").attr("content");k&&S&&(u.extraData=u.extraData||{},u.extraData[k]=S),u.forceSync?r():setTimeout(r,10);var I,B,D,A=50,P=t.parseXML||function(t,e){return window.ActiveXObject?((e=new ActiveXObject("Microsoft.XMLDOM")).async="false",e.loadXML(t)):e=(new DOMParser).parseFromString(t,"text/xml"),e&&e.documentElement&&"parsererror"!==e.documentElement.nodeName?e:null},L=t.parseJSON||function(t){return window.eval("("+t+")")},O=function(e,i,o){var n=e.getResponseHeader("content-type")||"",a=("xml"===i||!i)&&n.indexOf("xml")>=0,r=a?e.responseXML:e.responseText;return a&&"parsererror"===r.documentElement.nodeName&&t.error&&t.error("parsererror"),o&&o.dataFilter&&(r=o.dataFilter(r,i)),"string"==typeof r&&(("json"===i||!i)&&n.indexOf("json")>=0?r=L(r):("script"===i||!i)&&n.indexOf("javascript")>=0&&t.globalEval(r)),r};return j}if(!this.length)return o("ajaxSubmit: skipping submit process - no element selected"),this;var c,d,u,h=this;"function"==typeof e?e={success:e}:"string"==typeof e||!1===e&&arguments.length>0?(e={url:e,data:i,dataType:r},"function"==typeof s&&(e.success=s)):void 0===e&&(e={}),c=e.method||e.type||this.attr2("method"),(u=(u="string"==typeof(d=e.url||this.attr2("action"))?t.trim(d):"")||window.location.href||"")&&(u=(u.match(/^([^#]+)/)||[])[1]),e=t.extend(!0,{url:u,success:t.ajaxSettings.success,type:c||t.ajaxSettings.type,iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},e);var f={};if(this.trigger("form-pre-serialize",[this,e,f]),f.veto)return o("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(e.beforeSerialize&&!1===e.beforeSerialize(this,e))return o("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var p=e.traditional;void 0===p&&(p=t.ajaxSettings.traditional);var g,m=[],v=this.formToArray(e.semantic,m,e.filtering);if(e.data){var y=t.isFunction(e.data)?e.data(v):e.data;e.extraData=y,g=t.param(y,p)}if(e.beforeSubmit&&!1===e.beforeSubmit(v,this,e))return o("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[v,this,e,f]),f.veto)return o("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var w=t.param(v,p);g&&(w=w?w+"&"+g:g),"GET"===e.type.toUpperCase()?(e.url+=(e.url.indexOf("?")>=0?"&":"?")+w,e.data=null):e.data=w;var b=[];if(e.resetForm&&b.push((function(){h.resetForm()})),e.clearForm&&b.push((function(){h.clearForm(e.includeHidden)})),!e.dataType&&e.target){var x=e.success||function(){};b.push((function(i,o,n){var a=arguments,r=e.replaceTarget?"replaceWith":"html";t(e.target)[r](i).each((function(){x.apply(this,a)}))}))}else e.success&&(t.isArray(e.success)?t.merge(b,e.success):b.push(e.success));if(e.success=function(t,i,o){for(var n=e.context||this,a=0,r=b.length;a<r;a++)b[a].apply(n,[t,i,o||h,h])},e.error){var _=e.error;e.error=function(t,i,o){var n=e.context||this;_.apply(n,[t,i,o,h])}}if(e.complete){var T=e.complete;e.complete=function(t,i){var o=e.context||this;T.apply(o,[t,i,h])}}var j=t("input[type=file]:enabled",this).filter((function(){return""!==t(this).val()})).length>0,$="multipart/form-data",C=h.attr("enctype")===$||h.attr("encoding")===$,S=n.fileapi&&n.formdata;o("fileAPI :"+S);var k,I=(j||C)&&!S;!1!==e.iframe&&(e.iframe||I)?e.closeKeepAlive?t.get(e.closeKeepAlive,(function(){k=l(v)})):k=l(v):k=(j||C)&&S?function(i){for(var o=new FormData,n=0;n<i.length;n++)o.append(i[n].name,i[n].value);if(e.extraData){var a=function(i){var o,n,a=t.param(i,e.traditional).split("&"),r=a.length,s=[];for(o=0;o<r;o++)a[o]=a[o].replace(/\+/g," "),n=a[o].split("="),s.push([decodeURIComponent(n[0]),decodeURIComponent(n[1])]);return s}(e.extraData);for(n=0;n<a.length;n++)a[n]&&o.append(a[n][0],a[n][1])}e.data=null;var r=t.extend(!0,{},t.ajaxSettings,e,{contentType:!1,processData:!1,cache:!1,type:c||"POST"});e.uploadProgress&&(r.xhr=function(){var i=t.ajaxSettings.xhr();return i.upload&&i.upload.addEventListener("progress",(function(t){var i=0,o=t.loaded||t.position,n=t.total;t.lengthComputable&&(i=Math.ceil(o/n*100)),e.uploadProgress(t,o,n,i)}),!1),i}),r.data=null;var s=r.beforeSend;return r.beforeSend=function(t,i){e.formData?i.data=e.formData:i.data=o,s&&s.call(this,t,i)},t.ajax(r)}(v):t.ajax(e),h.removeData("jqxhr").data("jqxhr",k);for(var B=0;B<m.length;B++)m[B]=null;return this.trigger("form-submit-notify",[this,e]),this},t.fn.ajaxForm=function(n,a,r,s){if(("string"==typeof n||!1===n&&arguments.length>0)&&(n={url:n,data:a,dataType:r},"function"==typeof s&&(n.success=s)),(n=n||{}).delegation=n.delegation&&t.isFunction(t.fn.on),!n.delegation&&0===this.length){var l={s:this.selector,c:this.context};return!t.isReady&&l.s?(o("DOM not ready, queuing ajaxForm"),t((function(){t(l.s,l.c).ajaxForm(n)})),this):(o("terminating; zero elements found by selector"+(t.isReady?"":" (DOM not ready)")),this)}return n.delegation?(t(document).off("submit.form-plugin",this.selector,e).off("click.form-plugin",this.selector,i).on("submit.form-plugin",this.selector,n,e).on("click.form-plugin",this.selector,n,i),this):this.ajaxFormUnbind().on("submit.form-plugin",n,e).on("click.form-plugin",n,i)},t.fn.ajaxFormUnbind=function(){return this.off("submit.form-plugin click.form-plugin")},t.fn.formToArray=function(e,i,o){var a=[];if(0===this.length)return a;var r,s,l,c,d,u,h,f,p=this[0],g=this.attr("id"),m=e||void 0===p.elements?p.getElementsByTagName("*"):p.elements;if(m&&(m=t.makeArray(m)),g&&(e||/(Edge|Trident)\//.test(navigator.userAgent))&&((r=t(':input[form="'+g+'"]').get()).length&&(m=(m||[]).concat(r))),!m||!m.length)return a;for(t.isFunction(o)&&(m=t.map(m,o)),s=0,h=m.length;s<h;s++)if((c=(u=m[s]).name)&&!u.disabled)if(e&&p.clk&&"image"===u.type)p.clk===u&&(a.push({name:c,value:t(u).val(),type:u.type}),a.push({name:c+".x",value:p.clk_x},{name:c+".y",value:p.clk_y}));else if((d=t.fieldValue(u,!0))&&d.constructor===Array)for(i&&i.push(u),l=0,f=d.length;l<f;l++)a.push({name:c,value:d[l]});else if(n.fileapi&&"file"===u.type){i&&i.push(u);var v=u.files;if(v.length)for(l=0;l<v.length;l++)a.push({name:c,value:v[l],type:u.type});else a.push({name:c,value:"",type:u.type})}else null!=d&&(i&&i.push(u),a.push({name:c,value:d,type:u.type,required:u.required}));if(!e&&p.clk){var y=t(p.clk),w=y[0];(c=w.name)&&!w.disabled&&"image"===w.type&&(a.push({name:c,value:y.val()}),a.push({name:c+".x",value:p.clk_x},{name:c+".y",value:p.clk_y}))}return a},t.fn.formSerialize=function(e){return t.param(this.formToArray(e))},t.fn.fieldSerialize=function(e){var i=[];return this.each((function(){var o=this.name;if(o){var n=t.fieldValue(this,e);if(n&&n.constructor===Array)for(var a=0,r=n.length;a<r;a++)i.push({name:o,value:n[a]});else null!=n&&i.push({name:this.name,value:n})}})),t.param(i)},t.fn.fieldValue=function(e){for(var i=[],o=0,n=this.length;o<n;o++){var a=this[o],r=t.fieldValue(a,e);null==r||r.constructor===Array&&!r.length||(r.constructor===Array?t.merge(i,r):i.push(r))}return i},t.fieldValue=function(e,i){var o=e.name,n=e.type,a=e.tagName.toLowerCase();if(void 0===i&&(i=!0),i&&(!o||e.disabled||"reset"===n||"button"===n||("checkbox"===n||"radio"===n)&&!e.checked||("submit"===n||"image"===n)&&e.form&&e.form.clk!==e||"select"===a&&-1===e.selectedIndex))return null;if("select"===a){var r=e.selectedIndex;if(r<0)return null;for(var s=[],l=e.options,c="select-one"===n,d=c?r+1:l.length,u=c?r:0;u<d;u++){var h=l[u];if(h.selected&&!h.disabled){var f=h.value;if(f||(f=h.attributes&&h.attributes.value&&!h.attributes.value.specified?h.text:h.value),c)return f;s.push(f)}}return s}return t(e).val().replace(/\r?\n/g,"\r\n")},t.fn.clearForm=function(e){return this.each((function(){t("input,select,textarea",this).clearFields(e)}))},t.fn.clearFields=t.fn.clearInputs=function(e){var i=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each((function(){var o=this.type,n=this.tagName.toLowerCase();i.test(o)||"textarea"===n?this.value="":"checkbox"===o||"radio"===o?this.checked=!1:"select"===n?this.selectedIndex=-1:"file"===o?/MSIE/.test(navigator.userAgent)?t(this).replaceWith(t(this).clone(!0)):t(this).val(""):e&&(!0===e&&/hidden/.test(o)||"string"==typeof e&&t(this).is(e))&&(this.value="")}))},t.fn.resetForm=function(){return this.each((function(){var e=t(this),i=this.tagName.toLowerCase();switch(i){case"input":this.checked=this.defaultChecked;case"textarea":return this.value=this.defaultValue,!0;case"option":case"optgroup":var o=e.parents("select");return o.length&&o[0].multiple?"option"===i?this.selected=this.defaultSelected:e.find("option").resetForm():o.resetForm(),!0;case"select":return e.find("option").each((function(t){if(this.selected=this.defaultSelected,this.defaultSelected&&!e[0].multiple)return e[0].selectedIndex=t,!1})),!0;case"label":var n=t(e.attr("for")),a=e.find("input,select,textarea");return n[0]&&a.unshift(n[0]),a.resetForm(),!0;case"form":return("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset(),!0;default:return e.find("form,input,label,select,textarea").resetForm(),!0}}))},t.fn.enable=function(t){return void 0===t&&(t=!0),this.each((function(){this.disabled=!t}))},t.fn.selected=function(e){return void 0===e&&(e=!0),this.each((function(){var i=this.type;if("checkbox"===i||"radio"===i)this.checked=e;else if("option"===this.tagName.toLowerCase()){var o=t(this).parent("select");e&&o[0]&&"select-one"===o[0].type&&o.find("option").selected(!1),this.selected=e}}))},t.fn.ajaxSubmit.debug=!1})),function(){var t={activeIndicatedRequestsCount:0,add:function(t){var e=$.extend({},{type:"POST",dataType:"json",indicate:!0,success:function(){}},t),i=this;e.success=function(o,n,a){if(void 0!==o.bc_ajax_messages){var r=!0,s=!1,l=[];for(var c in o.bc_ajax_messages)if(o.bc_ajax_messages.hasOwnProperty(c)){var d=o.bc_ajax_messages[c];"backgroundTaskProgress"==d.type?s=d.key:"callJsMethod"==d.type?l.push(d.body):"onLoadMsg"==d.type?Bc.Informer.setOnLoadMsg($.extend({},d,{type:"ok"})):Bc.Informer.showMsg(d),"error"==d.type&&(r=!1)}if(s)Bc.BackgroundTask.track({key:s,jqueryParams:e,indicate:e.indicate,success:function(){i.runAjax(e)}});else if(r){var u=function(t,e){if(t.length){var i=t.pop();Bc.Array.getByPath(window,i.name).call(Bc.Array.getByPath(window,i.name.replace(/\.[^.]+$/,"")),i.options,(function(){u(t,e)}))}else e.call()};u(l,(function(){t.success&&t.success(o.bc_ajax_data)}))}else t.failure&&t.failure(o.bc_ajax_data)}else{if(o.errors)return void Bc.Informer.showMsg({type:"error",body:o.errors});if("ok"!==o.status)return void i.showAjaxError(a);t.success(o)}},this.runAjax(e)},runAjax:function(t){if(!t.form)return $.ajax(t);$(t.form).ajaxSubmit(t)},showAjaxError:function(t){console.log("showAjaxError"),console.log(t.responseText),Bc.Informer.showMsg({type:"debug",body:"<b>AJAX ошибка</b><br/>"+t.responseText})}};Bc.Ajax=function(e){return t.add(e)},Bc.Fetch=function(t){return new Promise((function(e,i){Bc.Ajax($.extend({},t,{success:function(t){e(t)},failure:function(){i()}}))}))},Bc.Ajax.startIndication=function(){t.activeIndicatedRequestsCount++,e.show()},Bc.Ajax.stopIndication=function(){t.activeIndicatedRequestsCount--,0===t.activeIndicatedRequestsCount&&e.hide()};let e={loaderClassName:"ajax-process",show:function(){$(document.body).addClass(this.loaderClassName)},hide:function(){$(document.body).removeClass(this.loaderClassName)}};$(document).ajaxSend((function(t,e,i){!0===i.indicate&&Bc.Ajax.startIndication()})),$(document).ajaxComplete((function(t,e,i){!0===i.indicate&&Bc.Ajax.stopIndication()})),$(document).ajaxError((function(e,i,o,n){!0===o.indicate&&t.showAjaxError(i)}))}(),function(){var t=function(t){this._state="tracking",this.o=$.extend({},{indicate:!1},t),this._messagesIndex=[],this.o.jqueryParams&&this.o.jqueryParams.indicate&&Bc.Ajax.startIndication(),this._updateStatus()};t.prototype={o:null,_state:"idle",_messagesIndex:[],_updateStatus:function(){let t;if(this.o.jqueryParams&&this.o.jqueryParams.url&&this.o.jqueryParams.url.match(/^http.*$/)){let e=document.createElement("a");e.href=this.o.jqueryParams.url,t="//"+e.hostname}else t=location.origin;Bc.Ajax({url:t+"/ajax/ajax-get-background-task-progress",data:{key:this.o.key},indicate:!1,success:$.proxy(this._onProgressLoad,this)})},_onProgressLoad:function(t){if(t.msgList)for(var e=0;e<t.msgList.length;e++)this._messagesIndex[e]?this._messagesIndex[e]=Bc.Informer.showMsg($.extend(t.msgList[e],{msgToReplace:this._messagesIndex[e],scrollTo:!1})):this._messagesIndex[e]=Bc.Informer.showMsg($.extend(t.msgList[e],{scrollTo:!1}));t.finishTime?(this._state="idle",this.o.jqueryParams&&this.o.jqueryParams.indicate&&Bc.Ajax.stopIndication(),t.finishMsg&&Bc.Informer.setOnLoadMsg(t.finishMsg),this.o.success&&this.o.success(t)):null!=t.msgList&&"error"==t.msgList[0].type?(this.o.jqueryParams&&this.o.jqueryParams.indicate&&Bc.Ajax.stopIndication(),console.log("Error response from BgTask")):setTimeout($.proxy(this._updateStatus,this),1500)}},Bc.BackgroundTask={o:null,_messagesToRemove:[],_state:"idle",track:function(e){new t(e)}}}(),Bc.Array={listToTree:function(t,e){for(var i in e=$.extend({parentField:"parent",idField:"id",rootId:0},e||{}),this._tree={childs:{},allChilds:{},parents:{},list:{},treeList:[]},this._tree.list[e.rootId]={},this._tree.parents[e.rootId]=[],this._tree.treeList.push({id:e.rootId,level:0}),t){var o=this.clone(t[i]),n=o[e.idField],a=o[e.parentField]||e.rootId;this._tree.list[n]=o,this._tree.childs[a]=this._tree.childs[a]||[],this._tree.childs[a].push(n)}return this._tree.childs[e.rootId]&&this._listToTreeProcessSubTree(e.rootId,1,[]),this._tree},_listToTreeProcessSubTree:function(t,e,i){for(var o in this._tree.allChilds[t]=this._tree.childs[t]||[],this._tree.childs[t]){var n=this._tree.childs[t][o],a=this.clone(i);a.push(n),this._tree.treeList.push({id:n,level:e}),this._tree.parents[n]=a,this._tree.childs[n]&&(this._listToTreeProcessSubTree(n,e+1,a),this._tree.allChilds[t]=this._tree.allChilds[t].concat(this._tree.allChilds[n]))}},clone:function(t){if(null==t||"object"!=typeof t)return t;if(t instanceof Date)return(e=new Date).setTime(t.getTime()),e;if(t instanceof Array){for(var e=[],i=0,o=t.length;i<o;++i)e[i]=this.clone(t[i]);return e}if(t instanceof Object){e={};for(var n in t)t.hasOwnProperty(n)&&(e[n]=this.clone(t[n]));return e}throw new Error("Unable to copy obj! Its type isn't supported.")},inArray:function(t,e,i){var o,n=!1;i=!!i;for(o in e)if(i&&e[o]===t||!i&&e[o]==t){n=!0;break}return n},objToCode:function(t){if("object"==typeof JSON&&"function"==typeof JSON.stringify)return JSON.stringify(t);var e=typeof t;if("object"!=e||null==t){if("string"==e){for(var i=[[/\\\\/g,"\\\\"],[/\n/g,"\\n"],[/\t/g,"\\t"],[/\f/g,"\\f"],[/"/g,'"']],o=0;o<i.length;o++){var n=i[o];t=t.replace(n[0],n[1])}t='"'+t+'"'}return String(t)}var a,r,s=[],l=t&&t.constructor==Array;for(a in t)t.hasOwnProperty(a)&&(e=typeof(r=t[a]),s.push((l?"":'"'+a+'":')+this.objToCode(r)));return(l?"[":"{")+String(s)+(l?"]":"}")},codeToObj:function(code){try{var data=eval("("+code+")")}catch(t){return null}return data},getByPath:function(t,e){for(var i=this._pathToArray(e),o=t,n=0;n<i.length;n++){var a=i[n];if(!o[a])return"";o=o[a]}return o},setByPath:function(t,e,i){for(var o=this._pathToArray(e),n=t,a=0;a<o.length;a++){var r=o[a];"PATH_TO_ARRAY_INCREMENT_INDEX"==r&&(r=this.getLength(n)),a==o.length-1?n[r]=i:n[r]=n[r]||{},n=n[r]}},formToObj:function(t){var e=$(t).serializeArray(),i={};for(var o in e)if(e.hasOwnProperty(o)){var n=e[o];this.setByPath(i,n.name,n.value)}return i},getLength:function(t){var e=0;for(var i in t)t.hasOwnProperty(i)&&e++;return e},_pathToArray:function(t){for(var e=t.replace(/\[\]/,"[PATH_TO_ARRAY_INCREMENT_INDEX]").split(/[\[\].]+/),i=[],o=0;o<e.length;o++)""!=e[o]&&i.push(e[o]);return i},toFlatArray:function(t){let e={};return this._toFormArraySys(t,e,"",0),e},_toFormArraySys:function(t,e,i,o){for(let n in t){if(!t.hasOwnProperty(n))continue;let a;a=0===o?n:i+"["+n+"]";let r=t[n];r instanceof Array||r instanceof Object?this._toFormArraySys(r,e,a,o+1):e[a]=r}},firstKey:function(t){let e=null;for(let i in t)if(t.hasOwnProperty(i)){e=i;break}return e}},Bc.Cache={_storageEnabled:null,enableStorage:function(){this._storageEnabled=this._isLocalStorageAvailable()},_isLocalStorageAvailable:function(){try{return"localStorage"in window&&null!==window.localStorage}catch(t){return!1}},set:function(t,e,i){var o={value:e,expiration:(new Date).getTime()+1e3*i};if(this._storageEnabled)try{localStorage.setItem(t,JSON.stringify(o))}catch(t){t==window.QUOTA_EXCEEDED_ERR&&console.log("Превышен размер локального хранилища")}},get:function(t){if(this._storageEnabled){var e=new Date,i=JSON.parse(localStorage.getItem(t));if(null!=i&&i.expiration>e.getTime())return i.value}return null}},Bc.Cache.enableStorage(),Bc.Cookie={set:function(t,e,i){null!==e&&""!==e&&this._setHeader(t,e,i)},get:function(t){var e=document.cookie.match(new RegExp(t+"=([^;]*)"));return e&&e[1]?decodeURIComponent(e[1]):null},remove:function(t){this._setHeader(t,"",-8760)},setHash:function(t,e){var i=[];for(var o in e)e.hasOwnProperty(o)&&(i.push(o),i.push(e[o].toString().replace(":","t:")));this.set(t,i.join("s:"))},getHash:function(t){var e=this.get(t);if(!e)return null;for(var i=e.split("s:"),o={},n=0,a=i.length;n<a;n+=2)o[i[n]]=i[n+1].replace("t:",":");return o},_getHeader:function(t,e,i,o,n){var a=[];if(a.push(t+"="+encodeURIComponent(e)),"number"==typeof i){var r=new Date;r.setTime(r.getTime()+36e5*i),a.push("expires="+r.toGMTString())}return o&&a.push("domain="+o),a.push("path="+(n||"/")),a.join(";")},_setHeader:function(t,e,i,o,n){document.cookie=this._getHeader(t,e,i,o,n)}},Bc.Url={_changeEventTimer:null,_hashDefaults:{},get:function(t){let e=this._searchPartToData(!0);return t?e[t]||"":e},getModifiedZendUrl:function(t,e){let i=new RegExp("\\/"+t+"\\/[^\\/]+\\/"),o="/"+t+"/"+e+"/";return location.pathname.match(i)?location.pathname.replace(i,o):location.pathname.replace(/\/?$/,o)},setZend:function(t,e){location.pathname=this.getModifiedZendUrl(t,e)},set:function(t,e){var i=this._searchPartToData();i[t]=e;var o=this._dataToSearchPart(i);o?location.search=o:location.href=location.origin+location.pathname},getHash:function(t){var e=$.extend({},this._hashDefaults,this._getAttrsFromHash());return t?e[t]:e},setHash:function(t,e){var i=this._getAttrsFromHash();this._hashDefaults[t]&&Bc.Array.objToCode(this._hashDefaults[t])==Bc.Array.objToCode(e)?i[t]&&delete i[t]:i[t]=e,this._setUrlHash(i)},setHashDefault:function(t,e){this._hashDefaults[t]=e},removeHash:function(t){var e=this._getAttrsFromHash();e[t]&&(delete e[t],this._setUrlHash(e))},getModifiedParameters:function(t){return this._dataToSearchPart(t)},_setUrlHash:function(t){var e=Bc.Array.objToCode(t);"{}"==e?history.pushState("",document.title,window.location.pathname):location.hash=e},_getAttrsFromHash:function(){var t=location.hash.toString().replace(/^.*#/,"");return t&&Bc.Array.codeToObj(decodeURIComponent(t))||{}},_searchPartToData:function(t){searchPart=location.search,searchPart=searchPart.replace(/^\?/,""),searchPart=searchPart.split("&");for(var e={},i=0;i<searchPart.length;i++){var o=searchPart[i].split("=");o[0]&&Bc.Array.setByPath(e,decodeURIComponent(o[0]),1==o.length||(t?decodeURIComponent(o[1]):o[1]))}return e},_dataToSearchPart:function(t){var e=[];return this._dataToSearchPartSys(t,e,"",0),e.length>0?"?"+e.join("&"):""},_dataToSearchPartSys:function(t,e,i,o){var n=0;for(var a in t)if(t.hasOwnProperty(a)){if(0===o)var r=a;else if(parseInt(a)===n)r=i+"[]";else r=i+"["+a+"]";var s=t[a];!0===s?e.push(r):s instanceof Array||s instanceof Object?this._dataToSearchPartSys(s,e,r,o+1):!1!==s&&null!==s&&e.push(r+"="+s),n++}}},Bc.Dialog={_isInited:!1,confirm:function(t){this._isInited||this._init(t),this.$dialog.html(t.body),this.$dialog.parent().addClass(t.classDialog),this.$dialog.dialog("option",{title:t.title,width:t.width,resizable:!1!==t.resizable,open:t.open||null,dialogClass:t.dialogClass||null,beforeClose:t.beforeClose||null,close:t.close||null,modal:!1!==t.modal,buttons:t.buttons||[{text:t.yesButtonText||"Да",class:"yes-button",click:function(){t.handler(),!1!==t.closeOnYes&&$(this).dialog("close")}},{text:t.noButtonText||"Нет",class:"no-button",click:function(){t.noHandler&&t.noHandler(),$(this).dialog("close")}}],position:null}),this.$dialog.dialog("open")},alert:function(t){this._isInited||this._init(t),this.$dialog.html(t.body),this.$dialog.dialog("option",{title:t.title,width:t.width,resizable:!1,open:t.open||null,dialogClass:t.dialogClass||null,beforeClose:t.beforeClose||null,buttons:t.buttons||[{text:t.buttonText||"OK",class:"yes-button",click:function(){$(this).dialog("close"),t.handler&&t.handler()}}],position:null}),this.$dialog.dialog("open")},modal:function(t){this._isInited||this._init(t),this.$dialog.html(t.body),this.$dialog.parent().addClass(t.classDialog),t=$.extend({autoOpen:!0},t),this.$dialog.dialog("option",{title:t.title,width:t.width,height:t.height||"auto",draggable:t.draggable||!1,closeOnEscape:!0,resizable:!1,open:t.open||null,beforeClose:t.beforeClose||null,close:function(){t.close&&t.close()},dialogClass:t.dialogClass||null,buttons:t.buttons||[{text:t.buttonTextOk||"OK",class:"yes-button",click:function(){-1!=t.handler()&&$(this).dialog("close")}},{text:t.buttonTextClose||"Закрыть",class:"no-button",click:function(){$(this).dialog("close")}}],position:t.position||null,modal:!1!==t.modal}),t.autoOpen&&this.$dialog.dialog("open")},close:function(){this.$dialog&&this.$dialog.dialog("close")},isOpened:function(){if(!this.$dialog)return!1;this.$dialog.dialog("isOpen")},open:function(){this.$dialog&&this.$dialog.dialog("open")},_init:function(t){this._isInited=!0,this.isCrm=window.location.pathname.indexOf("/crm/")>=0,t&&(this._params=t);var e=this;this.$dialog=$("<div></div>"),this.$dialog.on("dialogcreate",(function(){var t=$('<div class="ui-popup-wrapper"></div>');t.appendTo("body"),e.$dialog.parent().appendTo(t)})),this.$dialog.on("dialogopen",(function(){$("body").addClass("overflow-hidden scroll-stub"),e.isCrm&&$("html").addClass("overflow-hidden html-scroll-fix")})),this.$dialog.on("dialogclose",this._onDialogClose.bind(this)),this.$dialog.dialog({autoOpen:!1,modal:!1!==this._params.modal})},_onDialogClose:function(){this._isInited=!1,this._params&&this._params.classDialog&&this.$dialog.parent().removeClass(this._params.classDialog),this._params=null,$("body").removeClass("overflow-hidden scroll-stub"),this.isCrm&&$("html").removeClass("overflow-hidden html-scroll-fix"),this.isCrm=null,$(".ui-popup-wrapper").remove()}},Bc.Informer={_msgTypeCLass:{ok:"success-block",msg:"success-block",success:"success-block",shadowed:"shadowed-block",alert:"alert-block",error:"error-block",debug:"info-block",warn:"info-block",info:"info-block"},$floatingDiv:null,$popupMsgBox:null,showNewNewsPopup:function(t){t&&(t.onClose=function(t){var e=$("[data-article-id]",t).data("article-id");$.ajax({type:"POST",url:"/tc/news/ajax-mark-popup-as-read/",data:{article_id:e},success:function(t){}})},Bc.Informer.popupMsg(t))},showMsg:function(t){"string"==typeof t&&(t={body:t}),t.type=t.type||"ok",t=$.extend({scrollTo:!0},t);var e=$('<div class="'+this._msgTypeCLass[t.type]+' tc-informer-wraper"><i onclick="$(this).parent().slideUp(\'fast\');" class="icon-close"></i><div class="text"></div></div>'),i=e.find(".text");if("string"==typeof t.body)i.html(this._formatMsg(t));else{var o=[];for(var n in o.push("<ul>"),t.body)o.push("<li>"+this._getMsgText(t.body[n])+"</li>");o.push("</ul>"),i.html(o.join(""))}return e.click((function(t){t.ctrlKey&&e.remove()})),t.msgToReplace?t.msgToReplace.replaceWith(e):e.appendTo(this.$msgBox),("ok"==t.type||void 0!==t.decor&&null!==t.decor&&t.decor&&t.decor.match(/fadeout/))&&setTimeout((function(){e.fadeOut()}),8e3),t.scrollTo&&window.scrollTo(0,0),Bc.WidgetManager.initIn(this.$msgBox),e},lock:function(){Bc.WidgetManager.onPageLoad((function(){$("#js-Informer").data("bcWidget").lockToTop()}))},floatMsg:function(t){"string"==typeof t&&(t={body:t}),t=$.extend({floatingDivSelector:"#js-Informer"},t),this.$floatingDiv||($(t.floatingDivSelector).length?this.$floatingDiv=$(t.floatingDivSelector):(this.$floatingDiv=$("<div></div>").css({position:"fixed",left:"0px",top:"30px",width:"100%",zIndex:50}),this.$floatingDiv.appendTo("body"))),t=$.extend({closeDelay:4e3,type:"ok"},t);var e=function(t){t.slideUp("fast",(function(){$(this).remove()}))},i=$('<div class="'+this._msgTypeCLass[t.type]+'">\t\t\t\t<i class="icon-close"></i>\t\t\t\t<div class="text"></div>\t\t\t</div>');i.appendTo(t.$msgContainer||this.$floatingDiv).effect("highlight").click((function(t){t.ctrlKey&&e(i)})).children(".text").html(this._formatMsg(t)),$(".icon-close",i).click((function(t){e(i)})),parseInt(t.closeDelay)&&setTimeout((function(){e(i)}),t.closeDelay)},inPlaceMsg:function(t,e,i){(e="string"==typeof e?{body:e}:e).closeDelay=e.closeDelay||3e3;var o=t.offset().left+2*t.width(),n=t.offset().top+10,a=$('<div class="change_important_icon_block'+i+'"/>').css({left:o+"px",top:n+"px"}).html(e.body).appendTo("body");e.closeDelay&&setTimeout((function(){a.remove()}),e.closeDelay)},setOnLoadMsg:function(t){(t="string"==typeof t?{body:this._getMsgText(t)}:t).closeDelay=t.closeDelay||0,Bc.Cookie.setHash("BcInformer",t)},popupMsg:function(t){if(t=$.extend({id:Bc.getUID()},t),!this.$popupMsgBox.find('.new_event[data-event-id="'+t.id+'"]').length){var e=$('<div class="new_event" data-event-id="'+t.id+'"><div class="js-close close"></div><div class="wrapper_event"><div class="header_event"><div class="icon_event news_icon"></div><div class="date_event">'+t.date+'</div><div class="type_event">'+t.title+'</div></div><div class="description_event"><div class="title_event">'+t.body+'</div><a class="button_event" href="/">Подробнее</a></div></div></div>');e.hide(),$(".js-close",e).click((function(e){var i=$(e.target).parent(".new_event");i.fadeOut({complete:function(){t.onClose&&t.onClose(i),i.remove()}})})),this.$popupMsgBox.prepend(e),e.fadeIn()}},clear:function(){this.$msgBox.html("")},init:function(){this.$msgBox=$("#js-Informer"),this.$popupMsgBox=$(".js-popup-msg-wrap"),this.$msgBox.length||(this.$msgBox=$("<div></div>").prependTo("body"));var t=Bc.Cookie.getHash("BcInformer");t&&(Bc.Cookie.remove("BcInformer"),this.floatMsg(t))},_getMsgText:function(t){return Bc.page&&Bc.page.msg&&Bc.page.msg[t]?Bc.page.msg[t]:t},_formatMsg:function(t){let e=this._getMsgText(t.body);if(t.args){let i=0;e=e.replaceAll("?",(function(){return"<b>"+t.args[i++]+"</b>"}))}return e}},$((function(){Bc.Informer.init()})),Bc.Tpl={_tplFunctions:{},_searchedTplsFromScript:{},render:function(t,e,i){if(this._addTemplateFromScript(t),!this._tplFunctions[t])return console.log('Undefined template "'+t+'".'),"";try{var o=this._tplFunctions[t](e,i)}catch(e){return console.log("Error while running template."),console.log(this._tplFunctions[t]),console.log(e),""}return o},add:function(t,e){this._initTemplate(t,e)},hasTemplate:function(t){return this._addTemplateFromScript(t),!!this._tplFunctions[t]},_initTemplate:function(t,e){for(var i=e.length,o="string",n=0,a=0,r=["var s=[];"];a<i;)switch(e.charAt(a)){case"@":":"==e.charAt(a+1)?(r.push(this._makeCodePart(e,n,a,o)),"="==e.charAt(a+2)?(a+=3,o="echoJs"):(a+=2,o="js"),n=a):a++;break;case":":"@"==e.charAt(a+1)?(r.push(this._makeCodePart(e,n,a,o)),o="string",n=a+=2):a++;break;default:a++}"string"==o&&n!=a&&r.push(this._makeCodePart(e,n,a,o)),r.push("return s.join('');"),this._tplFunctions[t]=new Function("o","o2",r.join(""))},_addTemplateFromScript:function(t){if(!this._searchedTplsFromScript[t]){var e=$("#js-tpl-"+t.replace(/\./g,"\\.")).html();this._searchedTplsFromScript[t]=!0,e&&this._initTemplate(t,e)}},_makeCodePart:function(t,e,i,o){var n=t.substr(e,i-e);switch(o){case"string":return"s.push('"+n.replace(/[\r\t\n]/g," ").replace(/'/g,"\\'")+"');\n";case"echoJs":return"s.push("+n+");\n";case"js":return n+"\n"}}},Bc.Str={transliterate:function(t){const e={"а":"a","б":"b","в":"v","г":"g","д":"d","е":"e","ё":"e","ж":"zh","з":"z","и":"i","й":"y","к":"k","л":"l","м":"m","н":"n","о":"o","п":"p","р":"r","с":"s","т":"t","у":"u","ф":"f","х":"h","ц":"c","ч":"ch","ш":"sh","щ":"sch","ь":"","ы":"y","ъ":"","э":"e","ю":"yu","я":"ya","А":"A","Б":"B","В":"V","Г":"G","Д":"D","Е":"E","Ё":"E","Ж":"Zh","З":"Z","И":"I","Й":"Y","К":"K","Л":"L","М":"M","Н":"N","О":"O","П":"P","Р":"R","С":"S","Т":"T","У":"U","Ф":"F","Х":"H","Ц":"C","Ч":"Ch","Ш":"Sh","Щ":"Sch","Ь":"","Ы":"Y","Ъ":"","Э":"E","Ю":"Yu","Я":"Ya"};let i=[];for(let o=0;o<t.length;o++){let n=t.charAt(o);i.push(e[n]||n)}return i=i.join(""),i=i.replace(/\W+/g,"-"),i}},Bc.WidgetManager={_loadingWidgets:{},_widgetsToInitOnLoad:0,_isInitedOnLoad:!1,_initInIsWorking:!1,_onPageLoadHandlers:[],init:function(t,e,i){for(var o=this._getTagWidgetNames(e),n=0,a=1;a<=o.length;a++)if(o[a-1]==t){n=a;break}var r={};if(n>0){var s=1==n?"widgetConfig":"widgetConfig"+n;e.data(s)?r=e.data(s):1==n&&e.get(0).onclick&&(r=e.get(0).onclick())}i=$.extend(r,i);var l=Bc.widget[t];null!=l&&Bc.loadList(l.prototype.require||[],$.proxy((function(){var o=new l(e,i);e.data("bcWidget",o),e.trigger("Bc-widgetInited",o),e.data("bcWidgets")||e.data("bcWidgets",{}),e.data("bcWidgets")[t]=o,this._isInitedOnLoad||this._widgetsToInitOnLoad--,this._checkIfAllInited()}),this))},initIn:function(t,e){t=t||$(document);var i=this;e=null==e?0:e;$("[data-tooltip]",t).attr("data-widget","tooltip"),this._initInIsWorking=!0,$("[class*=js-widget-]",t).add("[data-widget]").each((function(){var t=$(this),o=t.data("widgetInitIfHidden");o=void 0===o?1:o,t.data("bcWidget")||(e||o||t.is(":visible"))&&i._initWidgetsInTag(t)})),this._initInIsWorking=!1,this._checkIfAllInited()},define:function(t,e){Bc.widget=Bc.widget||{},Bc.widget[t]=function(t,e){for(var i in e=e||{},this.$elem=this.$tag=t,this.o=e,this)"o"!=i&&"name"!=i&&i.charAt(0).match(/[a-z]/)&&"function"!=typeof this[i]&&t.data(i)&&(this[i]=t.data(i));t.data("bcWidget",this),this.init(t,e,this)},e.name=t,Bc.widget[t].prototype=e},onPageLoad:function(t){this._isInitedOnLoad?t.call():this._onPageLoadHandlers.push(t)},_getTagWidgetNames:function(t){var e=[];if(t.jsAttr("widget")&&e.push(t.jsAttr("widget")),t.data("widget")){var i=t.data("widget").match(/[\/\w]+/g);for(var o in i)i.hasOwnProperty(o)&&e.push(i[o])}for(var n in e)e.hasOwnProperty(n)&&e[n].match(/^\w+$/)&&(e[n]=e[n][0].toUpperCase()+e[n].slice(1));return e},_initWidgetsInTag:function(t){t.data("bcWidget",!0);var e=this._getTagWidgetNames(t);this._isInitedOnLoad||this._widgetsToInitOnLoad++;for(var i=0;i<e.length;i++){var o=e[i];"function"==typeof Bc.widget[o]?this.init(o,t,this):(this._loadingWidgets[o]||(this._loadingWidgets[o]=[],function(t,e){Bc.loadScript("widgets/"+e+".js",(function(){t._initWidgetsOnSourceLoad(e)}))}(this,o)),this._loadingWidgets[o].push(t))}},_initWidgetsOnSourceLoad:function(t){for(var e=this._loadingWidgets[t],i=0;i<e.length;i++)this.init(t,e[i],this);delete this._loadingWidgets[t]},_checkIfAllInited:function(){0!=this._widgetsToInitOnLoad||this._isInitedOnLoad||this._initInIsWorking||(this._isInitedOnLoad=!0,setTimeout($.proxy((function(){for(var t in this._onPageLoadHandlers)this._onPageLoadHandlers.hasOwnProperty(t)&&this._onPageLoadHandlers[t].call()}),this),1))},triggerOnLoad:function(t,e){Bc.WidgetManager.onPageLoad((function(){$(document).trigger(t,[e])}))}},$((function(){Bc.WidgetManager.initIn()})),Bc.SiteRegistrationTracker={areWidgetsInitialized:!1,yaClientId:null,formsRegistered:{},formsToSend:[],init:function(){let t=this;Bc.WidgetManager.onPageLoad((function(){t.areWidgetsInitialized=!0,t.formsToSend.length&&!window.Bc_isLoggedIn&&t.sendButtonsShownData(t.formsToSend)}))},registerFormButtonView:function(t){let e=t.formClass+"_"+(t.formSubType||"");this.formsRegistered[e]||(this.formsRegistered[e]=!0,this.areWidgetsInitialized?this.sendButtonsShownData([t]):this.formsToSend.push(t))},sendButtonsShownData:function(t){Bc.yaGetClientId((function(e){Bc.Ajax({url:"/registration/ajax-log-action/",indicate:!1,data:{action:"popupButtonView",forms:t,registrationUrl:location.href,yandexClientId:e}})}))}},Bc.SiteRegistrationTracker.init(),Bc.Date={clock:function(){var t=new Date,e=t.getHours(),i=t.getMinutes(),o=t.getSeconds();i=(i<10?"0":"")+i,o=(o<10?"0":"")+o,$("#today_hour_min").text(e+":"+i),$("#today_sec").css({"font-size":"9px","vertical-align":"text-top"}).text(o)},days:{0:"Воскресенье",1:"Понедельник",2:"Вторник",3:"Среда",4:"Четверг",5:"Пятница",6:"Суббота"},months:{0:"января",1:"Февраля",2:"марта",3:"апреля",4:"мая",5:"июня",6:"июля",7:"августа",8:"сентября",9:"октября",10:"ноября",11:"декабря"},monthsSingularly:{0:"январь",1:"февраль",2:"март",3:"апрель",4:"май",5:"июнь",6:"июль",7:"август",8:"сентябрь",9:"октябрь",10:"ноябрь",11:"декабрь"},showTime:function(){var t=new Date,e=this.days[t.getDay()],i=t.getDate(),o=this.months[t.getMonth()],n=t.getFullYear();$("#today_date").text(i+" "+o+" "+n+", "+e),this.clock(),window.setInterval(this.clock,1e3)}},jQuery((function(){Bc.Date.showTime()})),Bc.widget.Informer=function(t,e){this.$elem=t,this.$elem.on("click",".js-msg .close",(function(t){$(t.target).parents("js-msg").fadeOut()})),this.$elem.on("click",".js-alert .close",(function(t){$(t.target).parents("js-alert").remove()}))},Bc.widget.Informer.prototype={},function(t){"use strict";var e=function(t,e){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",t,e)};e.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},e.prototype.init=function(e,i,o){this.enabled=!0,this.type=e,this.$element=t(i),this.options=this.getOptions(o);for(var n=this.options.trigger.split(" "),a=n.length;a--;){var r=n[a];if("click"==r)this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this));else if("manual"!=r){var s="hover"==r?"mouseenter":"focus",l="hover"==r?"mouseleave":"blur";this.$element.on(s+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,t.proxy(this.leave,this))}}this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},e.prototype.getDefaults=function(){return e.DEFAULTS},e.prototype.getOptions=function(e){return(e=t.extend({},this.getDefaults(),this.$element.data(),e)).delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},e.prototype.getDelegateOptions=function(){var e={},i=this.getDefaults();return this._options&&t.each(this._options,(function(t,o){i[t]!=o&&(e[t]=o)})),e},e.prototype.enter=function(e){var i=e instanceof this.constructor?e:t(e.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);if(clearTimeout(i.timeout),i.hoverState="in",!i.options.delay||!i.options.delay.show)return i.show();i.timeout=setTimeout((function(){"in"==i.hoverState&&i.show()}),i.options.delay.show)},e.prototype.leave=function(e){var i=e instanceof this.constructor?e:t(e.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);if(clearTimeout(i.timeout),i.hoverState="out",!i.options.delay||!i.options.delay.hide)return i.hide();i.timeout=setTimeout((function(){"out"==i.hoverState&&i.hide()}),i.options.delay.hide)},e.prototype.show=function(){var e=t.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){if(this.$element.trigger(e),e.isDefaultPrevented())return;var i=this.tip();this.setContent(),this.options.animation&&i.addClass("fade");var o="function"==typeof this.options.placement?this.options.placement.call(this,i[0],this.$element[0]):this.options.placement,n=/\s?auto?\s?/i,a=n.test(o);a&&(o=o.replace(n,"")||"top"),i.detach().css({top:0,left:0,display:"block"}).addClass(o),this.options.container?i.appendTo(this.options.container):i.insertAfter(this.$element);var r=this.getPosition(),s=i[0].offsetWidth,l=i[0].offsetHeight;if(a){var c=this.$element.parent(),d=o,u=document.documentElement.scrollTop||document.body.scrollTop,h="body"==this.options.container?window.innerWidth:c.outerWidth(),f="body"==this.options.container?window.innerHeight:c.outerHeight(),p="body"==this.options.container?0:c.offset().left;o="bottom"==o&&r.top+r.height+l-u>f?"top":"top"==o&&r.top-u-l<0?"bottom":"right"==o&&r.right+s>h?"left":"left"==o&&r.left-s<p?"right":o,i.removeClass(d).addClass(o)}var g=this.getCalculatedOffset(o,r,s,l);this.applyPlacement(g,o),this.$element.trigger("shown.bs."+this.type)}},e.prototype.applyPlacement=function(t,e){var i,o=this.tip(),n=o[0].offsetWidth,a=o[0].offsetHeight,r=parseInt(o.css("margin-top"),10),s=parseInt(o.css("margin-left"),10);isNaN(r)&&(r=0),isNaN(s)&&(s=0),t.top=t.top+r,t.left=t.left+s,o.offset(t).addClass("in");var l=o[0].offsetWidth,c=o[0].offsetHeight;if("top"==e&&c!=a&&(i=!0,t.top=t.top+a-c),/bottom|top/.test(e)){var d=0;t.left<0&&(d=-2*t.left,t.left=0,o.offset(t),l=o[0].offsetWidth,c=o[0].offsetHeight),this.replaceArrow(d-n+l,l,"left")}else this.replaceArrow(c-a,c,"top");i&&o.offset(t)},e.prototype.replaceArrow=function(t,e,i){this.arrow().css(i,t?50*(1-t/e)+"%":"")},e.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},e.prototype.hide=function(){function e(){"in"!=i.hoverState&&o.detach()}var i=this,o=this.tip(),n=t.Event("hide.bs."+this.type);if(this.$element.trigger(n),!n.isDefaultPrevented())return o.removeClass("in"),t.support.transition&&this.$tip.hasClass("fade")?o.one(t.support.transition.end,e).emulateTransitionEnd(150):e(),this.$element.trigger("hidden.bs."+this.type),this},e.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},e.prototype.hasContent=function(){return this.getTitle()},e.prototype.getPosition=function(){var e=this.$element[0];return t.extend({},"function"==typeof e.getBoundingClientRect?e.getBoundingClientRect():{width:e.offsetWidth,height:e.offsetHeight},this.$element.offset())},e.prototype.getCalculatedOffset=function(t,e,i,o){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-i/2}:"top"==t?{top:e.top-o,left:e.left+e.width/2-i/2}:"left"==t?{top:e.top+e.height/2-o/2,left:e.left-i}:{top:e.top+e.height/2-o/2,left:e.left+e.width}},e.prototype.getTitle=function(){var t=this.$element,e=this.options;return t.attr("data-original-title")||("function"==typeof e.title?e.title.call(t[0]):e.title)},e.prototype.tip=function(){return this.$tip=this.$tip||t(this.options.template)},e.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},e.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},e.prototype.enable=function(){this.enabled=!0},e.prototype.disable=function(){this.enabled=!1},e.prototype.toggleEnabled=function(){this.enabled=!this.enabled},e.prototype.toggle=function(e){var i=e?t(e.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type):this;i.tip().hasClass("in")?i.leave(i):i.enter(i)},e.prototype.destroy=function(){this.hide().$element.off("."+this.type).removeData("bs."+this.type)};var i=t.fn.tooltip;t.fn.tooltip=function(i){return this.each((function(){var o=t(this),n=o.data("bs.tooltip"),a="object"==typeof i&&i;n||o.data("bs.tooltip",n=new e(this,a)),"string"==typeof i&&n[i]()}))},t.fn.tooltip.Constructor=e,t.fn.tooltip.noConflict=function(){return t.fn.tooltip=i,this}}(window.jQuery),jQuery.fn.getJsAttr=function(t){var e=this.attr("class");if(!e)return"";var i=e.match(new RegExp("js-"+t+"-'([^']*)'"))||e.match(new RegExp("js-"+t+"-([^\\s]*)"));return i?i[1]:""},$((function(){Bc._isPageLoaded=!0,Bc.onLoad()})),jQuery.browser)||(jQuery.uaMatch=function(t){t=t.toLowerCase();var e=/(chrome)[ \/]([\w.]+)/.exec(t)||/(webkit)[ \/]([\w.]+)/.exec(t)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(t)||/(msie) ([\w.]+)/.exec(t)||t.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(t)||[];return{browser:e[1]||"",version:e[2]||"0"}},matched=jQuery.uaMatch(navigator.userAgent),browser={},matched.browser&&(browser[matched.browser]=!0,browser.version=matched.version),browser.chrome?browser.webkit=!0:browser.webkit&&(browser.safari=!0),jQuery.browser=browser);window.addEventListener("error",(function(t){Bc.logError(t)}));