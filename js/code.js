var _tmr=_tmr||[];!function(){function e(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,n)}function t(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent&&e.detachEvent("on"+t,n)}function n(e,t){try{if(e.nodeName.toLowerCase()===t.toLowerCase())return e;if(e.parentNode)return n(e.parentNode,t)}catch(e){le&&console.warn("[TopMailRu] Error#1.25",e)}return null}function r(e,t){if(null===e.offsetParent||0==e.offsetHeight||0==e.offsetWidth||0==e.clientHeight||0==e.clientWidth||t&&(0==e.offsetLeft||0==e.offsetTop))return!1;if(void 0!==X.getComputedStyle){var n=X.getComputedStyle(e,null);return"none"!==n.display&&"hidden"!==n.visibility}return!0}function i(e,t){for(var n=0,r=t.length;n<r;n++)if(t[n]==e)return!0;return!1}function a(e){var t=typeof e;return!("number"===t||"boolean"===t||"string"===t||e.nodeType||e===e.window)}function o(e){return"[object Array]"===Object.prototype.toString.call(e)}function l(){var e,t,n,r,i,c=arguments,s=c[0]||{},u=!1,p=1,f=c.length;for("boolean"==typeof s&&(u=s,s=c[p++]||{}),a(s)||(s={});p<f;p++)if(null!=(e=c[p]))for(t in e)n=s[t],s!==(r=e[t])&&(u&&r&&(a(r)||(i=o(r)))?(i?(i=!1,n=n&&o(n)?n:[]):n=n&&a(n)?n:{},s[t]=l(u,n,r)):void 0!==r&&(s[t]=r));return s}function c(e){return(""+e).replace(/[\/\^\$\*\+\?\.\|\(\)\[\]\{\}\\]/g,"\\$&")}function s(e){var t="";try{var n=new Uint8Array(e);X.crypto.getRandomValues(n);for(var r=0;r<e;r++)t+=(n[r]%16).toString(16)}catch(i){for(t="",r=0;r<e;r++)t+=(n=Math.floor(16*Math.random())).toString(16)}return t}function u(){return(new Date).getTime()}function p(n,r){var i,a={data:r,raw:n,url:k(n)};if(i=!0,"function"!=typeof navigator.sendBeacon)i=!1;else{a.dataSplitter=";";var o=_(a.data,a.dataSplitter);try{i=!0===navigator.sendBeacon(a.url,o)}catch(e){i=!1}}i||(void 0===r?(a.dataSplitter=";",a.open=h,a.connect=g,a.startListen=y,a.stopListen=b,a.open(a),a.connect(a)):("function"==typeof X.XMLHttpRequest?(a.dataSplitter=";",a.open=f,a.connect=d,a.startListen=m,a.stopListen=v,a.open(a),a.connect(a),i=!0):i=!1,i||function(n){var r=Y.createElement("iframe"),i=Y.createElement("div");i.setAttribute("style","position: absolute !important; top: -9999px !important; left: -9999px !important; width: 1px !important; height: 1px !important;"),i.appendChild(r),Y.body.appendChild(i);try{var a,o=r.contentWindow.document,l=o.createElement("div");for(a in n.data)if(n.data.hasOwnProperty(a)){var c=n.data[a],s=typeof c;if("string"===s||"number"===s){var u=o.createElement("input");u.setAttribute("type","hidden"),u.setAttribute("name",a),u.value=c,l.appendChild(u)}}var p=o.createElement("form");p.setAttribute("action",n.url),p.setAttribute("method",be),p.setAttribute("enctype",_e),p.appendChild(l);var f=o.createElement("div");f.appendChild(p),o.body.appendChild(f);var d=function(){try{t(r,"load",d),Y.body.removeChild(i)}catch(e){le&&console.warn("[TopMailRu] Error#1.2",e)}};e(r,"load",d),p.submit()}catch(e){le&&console.warn("[TopMailRu] Error#1.3",e)}}(a)))}function f(e){e._connection=new X.XMLHttpRequest}function d(e){e._connection.open(be,e.url),e._connection.setRequestHeader("Content-Type",_e),e._connection.send(_(e.data,e.dataSplitter))}function m(t){e(t._connection,"load",t._onload),e(t._connection,"error",t._onerror)}function v(e){t(e._connection,"load",e._onload),t(e._connection,"error",e._onerror)}function h(e){e._connection=new Image}function g(e){e._connection.src=e.url+_(e.data,e.dataSplitter)}function y(e){e._connection.onload=e._onload,e._connection.onerror=e._onerror}function b(e){e._connection.onload=null,e._connection.onerror=null}function _(e,t){var n,r=t||";",i="";for(n in e)if(e.hasOwnProperty(n)){var a=e[n],o=typeof a;"string"!==o&&"number"!==o||(i+=r+escape(n)+"="+escape(a))}return i}function k(e){return"https://top-fwz1.mail.ru"+e}function w(e){return(e=Y.cookie.match(RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)")))?decodeURIComponent(e[1]):null}function T(e,t,n){var r=(n=n||{}).expires;for(var i in"number"==typeof n.expires&&(r=new Date).setTime(r.getTime()+n.expires),r&&r.toUTCString&&(r=r.toUTCString()),n.expires=r,e=e+"="+encodeURIComponent(t),n)((t=n[i])||0===t)&&(e+="; "+i,!0!==t&&(e+="="+t));Y.cookie=e}function E(e,t){var n=t||{};n.expires=-1,T(e,"",n)}function I(e){try{return we.getItem(e)}catch(e){le&&console.warn("[TopMailRu] Error#1.5",e)}return null}function S(e,t){try{we.setItem(e,t)}catch(e){le&&console.warn("[TopMailRu] Error#1.6",e)}}function x(e,t){ke&&T(e,t,Ee),Te&&S(e,t)}function R(e){var t=Y.createElement("script");t.type="text/javascript",t.async=!0,t.src=e,document.body.appendChild(t)}function M(e){var t=";e="+escape("detect");p(N(e,"/tracker",!1,!1)+t)}function A(e,t){if(e.length&&null!==t.ecom_data&&!(4096<(n=(n=ge(t.ecom_data))?(""+n).substring(1,n.length-1):"").length||-1===n.search(/\S/))){var n="{"+n+C("_m",t.ecom_method)+C("_t",t.ecom_type)+C("_jst",$e())+"}";p(N({id:e[0]},"/datalayer",!1,!0)+";ids="+escape(e.join())+";e="+escape(n))}}function C(e,t){var n=',"'+e+'":';if(!t||!t.length)return n+"[]";try{return n+'["'+t.join('","')+'"]'}catch(e){}return n+"false"}function O(e){Xe=!0,e.length&&R(k("/js/dyn-goal-config.js?ids="+e.join(",")))}function j(){}function D(e){e&&"object"==typeof e&&!st&&"id"in e&&(st=e.id)}function U(e){return(e=_t?_t[e]:void 0)&&Tt?e-Tt:void 0}function L(){if(_t){for(var e=0,t="domInteractive domContentLoadedEventStart domContentLoadedEventEnd domComplete loadEventStart loadEventEnd".split(" "),n=0;n<t.length;n++){var r=_t?_t[t[n]]:void 0;0<r&&(r<e||0==e)&&(e=r)}return e||void 0}}function P(e,t){var n=1<arguments.length?t:st;return e&&"object"==typeof e&&("id"in e&&e.id||n)}function N(e,t,n,r){Te&&S(rt,++it);var i,a="id"in e?e.id:st,o="url"in e?e.url:Z.href,l="referrer"in e?e.referrer:Y.referrer,c="title"in e?e.title:Y.title;null===(i=xe)&&(i=function(){var e=w(Me);if(null===e)return null;if(e=e.split("|"),2!==e.length)return null;var t=e[1];t=u()-t;return 0>t||t>Re?null:(e=parseInt(e[0],10),isNaN(e)?null:e)}()),i=null!==i?i?1:0:null;var s,p="userid"in e?e.userid:et||0===et?et:void 0,f=tt||void 0;s=he&&e.bfCache;var d=[];st&&a!==st&&d.push("sec"),"dataLayer"in X&&d.push("dl"),Ce&&d.push(["ecom"].concat(Ce).join("-")),(v=Ve())&&v.length&&d.push(["jst"].concat(v).join("-")),s&&d.push("bfc"),s=d.join(",");var m=X.screen,v=(d=(new Date).getTimezoneOffset(),"");if(X.Intl)try{v=X.Intl.DateTimeFormat().resolvedOptions().timeZone||""}catch(e){le&&console.warn("[TopMailRu] Error#1.1",e)}if(v=d+"/"+v,d=null!==(d=He)?d:function(){var e=w(ze);if(null===e)return null;if(3!==(e=e.split("|")).length)return null;var t=e[2];return 0>(t=u()-t)||t>Be?null:{id:e[0],version:e[1]}}(),e.start=L(),t=t+"?js=13"+(a?";id="+escape(a):"")+(o?";u="+escape(o):"")+(l?";r="+escape(l):"")+(e.start?";st="+escape(e.start):"")+("gender"in e?";gender="+escape(e.gender):"")+("age"in e?";age="+escape(e.age):"")+("pid"in e?";pid="+escape(e.pid):"")+(void 0!==p?";userid="+escape(p):"")+(void 0!==f?";uparams="+escape(ge(f)):"")+(r&&c?";title="+encodeURIComponent(c):"")+(m?";s="+m.width+"*"+m.height:"")+";vp=",a=r=0,Y.documentElement&&(Y.documentElement.clientWidth||Y.documentElement.clientHeight)?(r=Y.documentElement.clientWidth,a=Y.documentElement.clientHeight):"number"==typeof X.innerWidth&&(r=X.innerWidth,a=X.innerHeight),t=t+(r+"*")+a+";touch="+vt+";hds="+ht+";frame="+gt+";flash=",null===yt)if(yt="",K.plugins&&K.plugins["Shockwave Flash"])yt=K.plugins["Shockwave Flash"].description.split(" ")[2];else if(X.ActiveXObject)try{var h=(h=(h=new ActiveXObject("ShockwaveFlash.ShockwaveFlash")).GetVariable("$version")).split(" ")[1].split(",");yt=h[0]+"."+h[1]}catch(e){le&&console.warn("[TopMailRu] Error#1.12",e)}if(h=t+yt+";sid="+Qe+";ver="+Ke+";tz="+encodeURIComponent(v),n){if(_t&&kt){for((n=[]).push(kt.type),n.push(kt.redirectCount),n.push(Tt),t=0;t<wt.length;t++)n.push(U(wt[t]));n=n.join("/")}else n="";n=";nt="+n}else n="";if(n=h+n+("device"in e?";device="+escape(e.device):"")+";ni=",K&&K.connection){for(h=K.connection,t=[],a=0;a<Et.length;a++){if(void 0!==(r=h[Et[a]]))switch(r){case!0:r=1;break;case!1:r=0;break;default:r=(""+r).replace(/\//g,"_")}t.push(r)}h=t.join("/")}else h="";return n+h+("params"in e?";params="+escape(ge(e.params)):"")+(null!==i?";detect="+i:"")+(ke||Te?";lvid="+escape([ot,u(),it,at].join(":")):"")+(s?";opts="+escape(s):"")+(d?";flocid="+escape(d.id)+";flocv="+escape(d.version):"")+("version"in e?";appver="+escape(e.version):"")+(qe.support?";visible="+qe.getValue():"")+";_="+Math.random()}function $(e){e=";e="+escape("PVT/"+e);for(var t=0;t<ut.length;t++)p(N(ut[t],"/tracker",!1,!0)+e)}function V(){if(xe=!0,z(1),!pe&&!Se){Se=!0;for(var e=0;e<ut.length;e++)M(ut[e])}}function B(){z(0),xe=!1}function z(e){e=[e,u()].join("|"),T(Me,e,{path:"/",expires:Re})}function H(){ce||setInterval((function(){_tmr.beat()}),6e4)}function q(){Y.addEventListener?(t(Y,"DOMContentLoaded",q),_tmr.onready()):Y.attachEvent&&"complete"===Y.readyState&&(t(Y,"readystatechange",q),_tmr.onready()),W()}function F(e){if(he){if(e.persisted){nt=Ze=Ye=0,Ot=Ct=!1,e=St,St=[];for(var n=0,r=e.length;n<r;n++)_tmr.callbackOnReady(e[n]);for(n in e=mt,mt={},e)_tmr.pageView(e[n]);H()}}else t(X,"load",F);_tmr.onready(),_tmr.onload()}function G(){he||(t(X,"unload",G),t(X,"beforeunload",G)),_tmr.unload()}function W(){if(fe&&Je.launch(),me){if(window.addEventListener("message",(function(e){var t=null;try{if(a(t=e.data)||(t=ye(e.data)),"LOAD_BUTTONS_SCRIPT"===t.type){var n,r=t.payload,i=(""+r).toLowerCase();e:{e=0;for(var o=J.length;e<o;e++)if(J[e]===r){n=!0;break e}n=!1}n||(i=J[0]),R(k("/js/dyn-goal-wizard-"+i+".js"))}}catch(e){}})),window.opener)try{window.opener.postMessage({type:"READY"},document.referrer)}catch(e){}Xe||O(pt)}}if("[object Array]"===Object.prototype.toString.call(_tmr)){var J=["ru","en"],X=window,K=navigator,Y=document,Z=location,Q="string"==typeof Z.hostname?Z.hostname:"",ee=-1!=Q.search(/(^|\.)odnoklassniki\.ru$/)||-1!=Q.search(/(^|\.)ok\.ru$/),te=-1!=Q.search(/(^|\.)vk\.com$/);Q.search(/(^|\.)mail\.ru$/);var ne=-1!=Q.search(/(^|\.)lamoda\.ru$/),re=-1!=Q.search(/(^|\.)kommersant\.ru$/),ie=-1!=Q.search(/(^|\.)top\.mail\.ru$/);Q.search(/(^|\.)journal\.tinkoff\.ru$/);var ae=ie||-1!=Q.search(/(^|\.)colossus-guitars\.ru$/),oe="string"==typeof Z.search&&-1!=Z.search.search(/[?&]rb_clickid=/),le="string"==typeof Z.search&&-1!=Z.search.search(/[?&]tmr_debug=1(?:&|$)/),ce=ee||te||ne||re,se=!oe,ue=ee,pe=!1,fe=ie||"mail.ru"==Q||"e.mail.ru"==Q,de=!(ee||te),me=ae,ve=X.JSON&&X.JSON.stringify&&X.JSON.parse,he="onpageshow"in X&&"onpagehide"in X,ge=ve?X.JSON.stringify.bind(X.JSON):function(e){return""},ye=ve?X.JSON.parse.bind(X.JSON):function(e){return{}},be="POST",_e="application/x-www-form-urlencoded",ke=!(0===Z.hostname.search(/^(\d+.)+\d+$/g)||-1!==Z.hostname.search(/:/g)),we=null,Te=function(){var e="tmr"+(""+Math.random()).slice(2);try{return(we=X.localStorage||null).setItem(e,e),we.removeItem(e),!0}catch(e){return we=null,le&&console.warn("[TopMailRu] Error#1.4",e),!1}}(),Ee={domain:function(){if(!ke)return null;for(var e,t=Z.hostname.split(".").reverse(),n=1,r=t.length;n<r;n++){e=t[0];for(var i=1;i<=n;i++)e=t[i]+"."+e;i=""+u();var a={domain:e,path:"/",expires:3e5};try{T("tmr_tcdhn",i,a);var o=w("tmr_tcdhn");if(E("tmr_tcdhn",a),o===i)return e}catch(e){le&&console.warn("[TopMailRu] Error#1.8",e)}}return null}(),path:"/",expires:287712e5};!function(){var e;if(e=Y.cookie.match(RegExp("(?:^|; )(tmr_tcdhn\\d+)=([^;]*)","g"))){for(var t,n=[],r=0,i=e.length;r<i;r++)(t=(t=e[r]).match(/(?:^|; )(tmr_tcdhn\d+)=([^;]*)/))&&n.push(t.slice(1));e=n}else e=null;if(e)for(r=0,i=e.length;r<i;r++)E(n=e[r][0],Ee)}();var Ie,Se=!1,xe=null,Re=864e5,Me="tmr_detect",Ae=function(){function e(e,n){var r=Y.createElement("div"),i=function(e,t){for(var n,r,i=e.length,a=0;a<t;a++)r=Math.floor(Math.random()*i),n=e[a],e[a]=e[r],e[r]=n;return e.slice(0,t)}(i=String.fromCharCode(97,100,118,98,108,111,99,107,32,97,100,118,101,114,116,98,108,111,99,107,32,97,100,118,101,114,116,66,108,111,99,107,32,98,45,114,98,32,98,97,110,110,101,114,95,50,52,48,32,112,45,116,97,114,103,101,116,32,112,117,98,95,51,48,48,120,50,53,48,32,112,117,98,95,51,48,48,120,50,53,48,109,32,112,117,98,95,55,50,56,120,57,48,32,114,98,95,98,111,100,121,32,114,98,45,102,108,111,97,116,105,110,103,32,114,98,45,115,108,111,116,32,114,98,45,118,105,100,101,111,45,119,105,100,103,101,116,32,116,101,120,116,45,97,100,32,116,101,120,116,45,97,100,45,108,105,110,107,115,32,116,101,120,116,45,97,100,115,32,116,101,120,116,45,98,97,110,110,101,114,32,116,101,120,116,95,97,100,32,116,101,120,116,95,97,100,115,32,116,101,120,116,65,100,32,116,101,120,116,97,100,32,116,101,120,116,65,100,115,32,116,101,120,116,97,100,115,32,116,103,98,45,98,97,110,110,101,114,32,116,114,103,45,98,45,98,97,110,110,101,114,45,98,108,111,99,107).split(" "),t);r.setAttribute("class",i.join(" ")),r.setAttribute("style","position: absolute !important; top: -9999px !important; left: -9999px !important; width: 1px !important; height: 1px !important;"),r.setAttribute("id","trg-b-banners-1"),r.setAttribute("data-view","SlotView.mimic"),this.bait=Y.body.appendChild(r),this.bait.offsetParent,this.bait.offsetHeight,this.bait.offsetLeft,this.bait.offsetTop,this.bait.offsetWidth,this.bait.clientHeight,this.bait.clientWidth,this.loopNumber=0,this.fnPositive=e||null,this.fnNegative=n||null;var a=this;setTimeout((function(){a._checkBait.call(a)}),1)}var t=7;return e.prototype._checkBait=function(){if(Se)this._stop();else{var e=null!==Y.body.getAttribute("abp")||!r(this.bait,!0);if((!0===e||10<=++this.loopNumber)&&this._stop(),e&&this.fnPositive)try{(0,this.fnPositive)()}catch(e){le&&console.warn("[TopMailRu] Error#1.9",e)}else if(!e&&10>this.loopNumber){var t=this;setTimeout((function(){t._checkBait.call(t)}),50*this.loopNumber)}else try{(0,this.fnNegative)()}catch(e){le&&console.warn("[TopMailRu] Error#1.10",e)}}},e.prototype._stop=function(){try{Y.body.removeChild(this.bait)}catch(e){le&&console.warn("[TopMailRu] Error#1.11",e)}},function(t,n){new e(t,n)}}(),Ce=null,Oe="ecommerce",je="dataLayer",De=null,Ue=!1,Le=[],Pe=[36383,2540645,3171181,3074137,2057653],Ne=[];!function(){function e(e,t){for(var n=0,r=t.length;n<r;n++)-1===e.indexOf(t[n])&&e.push(t[n])}function t(t,n,r){for(var i={ecom_method:[],ecom_type:[],ecom_data:{events:[]}},a=0,o=t.length;a<o;a++){var l=d[t[a]];if(l){e(i.ecom_method,[t[a]]);for(var c=0,s=l.length;c<s;c++)for(var u=0,p=r.length;u<p;u++){var f=l[c][r[u]];if(f)for(var m=0,v=n.length;m<v;m++)if(-1!==l[c].type.indexOf(n[m])){e(i.ecom_type,[n[m]]),e(i.ecom_data.events,f);break}}}}return i}function n(e,t,n){if(!e||!n||!(t in d))return null;for(var r,i=0,a=d[t].length;i<a;i++)if(n in(r=d[t][i])&&-1!==r[n].indexOf(e))return{ecom_method:[t],ecom_type:r.type.slice(),ecom_data:{}};return null}function r(e){for(var r,s,u=[],d=0,m=e.length;d<m;d++)if(s=e[d]){r=null;try{if(s.ecommerce)r=i(s)||a(s);else if(null===s.ecommerce)r=null;else if(s.event){var v={event:s.event,ecommerce:{}};r=i(v)||a(v)}else if("event"===s[0]){var h=s[1],g=s[2],y=n(h,l,p);y&&(y.ecom_data[h]=g),r=y}else if(s.event===Oe)e:{for(var b=t([o],[c],[f]),_=0,k=b.ecom_data.events.length;_<k;_++)if(!s.hasOwnProperty(b.ecom_data.events[_])){r=null;break e}delete b.ecom_data.events,b.ecom_data[Oe]=s,r=b}}catch(e){le&&console.warn("[TopMailRu] Error#1.23",e),r=null}r&&(u.push(r),Le.push(r))}if(u.length){for(e=0,r=u.length;e<r;e++)A(dt,u[e]);for(Ce||(Ce=[0,0,je]),Ce[0]+=u.length,r=e=0,d=u.length;r<d;r++)e+=ge(u[r].ecom_data).length;Ce[1]+=e}}function i(e){var t,r;for(r in e.ecommerce)if(e.ecommerce.hasOwnProperty(r)&&(t=n(r,o,s))){if(e.event&&(r=n(e.event,o,u)))for(var i=0,a=t.ecom_type.length;i<a;i++)-1===r.ecom_type.indexOf(t.ecom_type[i])&&(t.ecom_type.splice(i,1),a--,i--);return t.ecom_data=e.ecommerce,t}return null}function a(e){var t=e.event,r=n(t,o,u);return r&&(r.ecom_data[t]=e.ecommerce),r}var o="push",l="gtag",c="gse",s="inner",u="outer",p="external",f="required",d={};d[l]=[{type:["gee"],external:"add checkout checkout_option checkout_progress click detail promo_click remove select_content set_checkout_option view_refund".split(" ")},{type:["ga4"],external:"earn_virtual_currency join_group level_end level_start level_up post_score select_content spend_virtual_currency tutorial_begin tutorial_complete unlock_achievement ad_impression login search share sign_up add_payment_info add_shipping_info add_to_wishlist generate_lead select_item select_promotion view_cart view_item_list".split(" ")},{type:["gee","ga4"],external:"add_to_cart begin_checkout purchase refund remove_from_cart view_item view_promotion".split(" ")}],d[o]=[{type:[c],required:["transactionId","transactionTotal"]},{type:["ga4"],outer:t([l],["ga4"],[p]).ecom_data.events},{type:["gee"],inner:"click checkout checkout_option impressions promoClick promoView refund".split(" "),outer:"addToCart checkout checkoutOption productClick productDetail ProductImpressions promotionClick promotionView removeFromCart transactionPush".split(" ")},{type:["ym","gee"],inner:["add","detail","purchase","remove"]},{type:["mt"],outer:["mt_order","mt_refund"]}],Ie=function(e){if(e!==je||!De){e!==je&&(Le=[]);var t=X[je];t&&"function"==typeof t.push&&De&&(t.push=De,De=null),function(e){(e=X[e])&&"function"==typeof e.push&&(r(e),De=e.push,e.push=function(){var e=De.apply(this,arguments);return r([].slice.call(arguments,0)),e})}(e),Ue=!0}}}();var $e=($t=[{id:"gtag",globalVars:["google_tag_manager"]},{id:"ga",globalVars:["GoogleAnalyticsObject"]},{id:"ym",globalVars:["Ya",{re:"yaCounter\\d+"}]},{id:"vk",globalVars:["VK"]},{id:"vk",globalVars:["vkAsyncInit"]}],Vt={},function(){var e;try{e=Object.keys(X).join(",")}catch(t){e=null}for(var t,n=[],r=0,a=$t.length;r<a;r++){if(void 0===(t=Vt[$t[r].id]))e:{for(var o=e,l=0,c=(t=$t[r].globalVars).length;l<c;l++){var s=t[l];if("string"==typeof s&&!(s in X)||"string"==typeof s.re&&(o&&-1===o.search(RegExp("($|,)"+s.re+"(,|^)","m"))||1===c)){t=!1;break e}}t=!0}t&&(Vt[$t[r].id]=!0,i($t[r].id,n)||n.push($t[r].id))}return n}),Ve=$e,Be=864e5,ze="tmr_floc",He=null;!function(e){try{Y.interestCohort&&"function"==typeof Y.interestCohort&&Y.interestCohort().then((function(e){He={id:e.id,version:e.version},e=[e.id,e.version];var t=u();e=e.concat(t).join("|"),T(ze,e,{path:"/",expires:Be})}),(function(){}))}catch(e){}}();var qe={support:!1};qe=function(){function t(){a(l)}function n(){a(l,m)}function r(e){e.persisted&&(v[l]=null,v[c]=null,a(l,f))}function i(){return s?!Y[s]:null}function a(e,t){var n=u(),r=void 0===t?i():t;if(null===v[e])v[e]={ts:n,state:r,total:0};else{var a=v[e];if(a.state!==r&&(a.state!==m||r===f)){var l=n-a.ts,c=a.state;a.ts=n,a.state=r,l<o||(c===f?(a.total+=l,h&&h(n,l)):c===d&&g&&g(n,l))}}}var o=5,l="auto",c="user",s=null,p=null,f=!0,d=!1,m=null;"hidden"in Y?(s="hidden",p="visibilitychange"):"mozHidden"in Y?(s="mozHidden",p="mozvisibilitychange"):"webkitHidden"in Y?(s="webkitHidden",p="webkitvisibilitychange"):"msHidden"in Y&&(s="msHidden",p="msvisibilitychange");var v={};v[l]=null;var h=v[c]=null,g=null;return{support:!!s,auto:function(i,a){h=i||null,g=a||null,s&&(t(),e(Y,p,t)),he?(e(X,"pageshow",r),e(X,"pagehide",n)):(e(X,"beforeunload",n),e(X,"unload",n))},set:function(e){a(c,!!e)},getLog:function(){var e,t,n=u(),r={};for(t in v)e=v[t],r[t]=e?e.total:0,e&&e.state&&(r[t]+=n-e.ts);return r},getValue:i}}();qe.auto();var Fe={enabled:!1},Ge=function(){function e(e,n){var a;a=(""+e).match(r)||[];var o={};if(o[i]=a,a.length){for(var l=0,c=a.length;l<c;l++)a[l]&&(o[u[l]]=a[l]);a=o}else a=null;if(!a)return null;if((o=1<arguments.length&&void 0!==n)&&(-1!==p.indexOf(n)||!0===n)){l=a;for(var s=0,d=p.length;s<d;s++)(c=t(f[s]||"",l,s))&&(l[p[s]]=c)}return delete a[i],o&&!0!==n?a[n]||null:a}function t(e,n,r){var i,l="";if(a(e)&&"data"in e)l="index"in e?(n[e.data]||[])[e.index]||"":t(e.data,n,r),"re"in e&&(l=function(e,t,n){if(!e)return null;var r=e.match(t),i=2<arguments.length?n:0;return r&&r.length>i?r[i]:null}(l,e.re,e.reMatchIndex)||""),l&&(l=(i=t(e.pre||"",n,r))+l+(e=t(e.post||"",n,r)));else if(o(e)){i=0;for(var c=e.length;i<c;i++)l+=t(e[i],n,r)}else-1===(l=u.indexOf(e))&&((l=p.indexOf(e))>=r&&(l=-1)),l=-1!==l?n[e]||"":""+e;return l}var n=/^((mailto|tel|fax|modem)\:)(.*)$/,r=/^(?:([a-z]+):(?:([a-z]*):)?\/\/)?(?:([^:@]*)(?::([^:@]*))?@)?(?:((?:[a-z0-9_-]+\.)+[a-z]{2,}|localhost|(?:(?:[01]?\d\d?|2[0-4]\d|25[0-5])\.){3}(?:(?:[01]?\d\d?|2[0-4]\d|25[0-5]))))(?::(\d+))?(?:([^:\?\#]+))?(?:\?([^\#]+))?(?:\#([^\s]+))?$/i,i="_raw",l="hash",s=["href","protocol","contactBy","contactTo"],u=["href","scheme","subscheme","user","pass","hostname","port","pathname","query",l="hash"],p=["protocol","auth","host","domain","path","search",l,"fileExtension"],f=[{data:["scheme",{pre:":",data:"subscheme"}],post:":"},[{data:"user",post:{pre:":",data:"pass"}}],[{data:i,index:5,post:{pre:":",data:"port"}}],{data:"host",re:/^(?:w{3}.)?(.*)$/,reMatchIndex:1},["pathname",{pre:"?",data:"query"}],{pre:"?",data:"query"},{pre:"#",data:l},{data:"pathname",re:/.\.([^\.]+)$/,reMatchIndex:1}];return{parse:function(t,r){return t?n.test(""+t)?function(e,t){var r=(""+e).match(n),a={};a[i]=r;for(var o=0,l=r.length;o<l;o++)r[o]&&(a[s[o]]=r[o]);return r=1<arguments.length&&void 0!==t,delete a[i],r&&!0!==t?a[t]||null:a}(t,r):e(t,r):null},getIsDomainRE:function e(t){var n;if(o(t)){n=[];for(var r=0,i=t.length;r<i;r++)n.push(e(t[r]));return n}return(n=t instanceof RegExp?t:RegExp("^"+c(t)+"$")).test(Ge.parse(Z.href,"domain"))?null:n},getDomainMask:function(e,t,n){t=(t&&0<t?t:2)-1;var r=1;return(r=(e=(""+e).replace(RegExp("^.*(?:\\.((?:[^\\.]+\\.){"+t+"}[^\\.]+$))"),"$1")).match(/\./g))&&(r=r.length),e="(?:^|\\.{"+(t-r+1)+"})"+c(e)+"$",RegExp(n?"^((?!"+e+").)*$":e)}}}(),We=function(){var e="checkbox color date datetime-local email file month number password radio range search tel text time url week".split(" ");return{analyze:function(t){if(!t)return null;for(var n=[].slice.apply(t.elements),i=[],a=[],o=0,l=n.length;o<l;o++){var c;e:switch(c=n[o],c.tagName.toLowerCase()){case"button":c=!1;break e;case"input":var s=c.type.toLowerCase();if(s&&-1===e.indexOf(s)){c=!1;break e}default:c=r(c,!1)&&c.name&&!1===c.disabled}c&&(i.push(n[o].name),a.push(n[o].type))}return{node:t,inputsName:i.length?i:null,inputsType:a.length?a:null}},getFormByInput:function(e){return e?"string"==typeof(e=e.form||e.getAttribute("form"))?document.getElementById(e)||null:e instanceof HTMLElement?e:null:null}}}();Fe=function(){function t(e){var t=((e=e||X.event).which||e.keyCode)===E;if("which"in e&&e.which===T||"button"in e&&e.button&T||t){e:{e=e.target||e.srcElement;t=0;for(var i=p.length;t<i;t++){var a;t:{a=e;for(var c=p[t],g=0,y=c.types.length;g<y;g++){var b;n:{var k=a,I=null;if((b=c.types[g]).filter.tagName)for(var S=0,x=b.filter.tagName.length;S<x&&!(I=n(k,b.filter.tagName[S]));S++);else I=k;if(I){if(b.filter.attr)for(k in k=void 0,b.filter.attr)if(b.filter.attr.hasOwnProperty(k)&&(S=b.filter.attr[k],x=I[k],!0===S&&!x||!1===S&&x||o(S)&&-1===S.indexOf(x))){b=null;break n}b={source:I,type:b.type,detail:I.tagName}}else b=null}if(b){b.category=c.category,a=b;break t}}a=null}if(a){e=a;break e}}e=null}if(e){if(e.category===s){if(e.data=Ge.parse(e.source.href,!0),!e.data)return}else{if(e.category!==u)return;if(e.data=We.analyze(We.getFormByInput(e.source)),!e.data)return}if((t=w).enabled&&t.modes)for(i=0,a=t.modes.length;i<a;i++)if(c=e,g=t.modes[i],c.category===g.mode)if(c.category===s||c.category===u){if(g=g.categories,c.data){y=void 0;e:{for(y=0,b=g.length;y<b;y++){I=c,k=g[y],S={category:c.category},x=[];for(var R=0,M=k.types.length;R<M;R++){var A,C=k.types[R],O=l({type:k.category},S),j=h in C;if(v in C?A=r(I,C,O,v):j&&(A=l({source:I.source,data:I.data,detail:C.type},O)),A&&(!j||!r(I,C,O,h))&&(x.push(A),(C.rule&_)!==_))break}if(I=x.length?x:null){y=I;break e}}y=null}if(y)for(c=0,g=y.length;c<g;c++)e:{if(I={type:"sendEvent",category:"_"+(b=y[c]).category,action:b.detail},b.category!==s||b.type!==f&&b.type!==d){if(b.category===m&&(I.label=b.data.node.action,!I.label))break e}else if(I.label=b.data.href,!I.label)break e;_tmr.push(I)}}}else le&&console.warn("[TopMailRu] Error#1.24","Not found tracking for type",c.type)}}}function r(e,t,n,r){var a=!1,c=t[r];if(o(c)){r=((s=t[r+"Rule"]||k)&g)===g;for(var s=(s&y)===y,u=0,p=c.length;u<p&&(a=i(e,c[u]),!r||!a);u++)if(s&&!a)return null}else a=i(e,c);return a?l({source:e.source,data:e.data,detail:t.type},n):null}function i(e,t){var n,r=((i=t.rule||k)&g)===g,i=(i&y)===y,a=!1;for(n in t)if(t.hasOwnProperty(n)&&"rule"!==n){a=t[n];var l=e.data[n];a=!0===a?!!(o(l)?l.length:l):!1===a?!(o(l)?l.length:l):c(l,a);if(r&&a)break;if(i&&!a)return!1}return a}function c(e,t){var n=e;if(!n)return!1;if(o(n)){if(!n.length)return!1}else n=[n];var r=t,i=k;if(a(r)&&!o(r)){if(!o(r.value))return!1;i=r.rule||i,r=r.value}e:{for(var l=(i&b)===b,c=(i&g)===g,s=(i=(i&y)===y,!1),u=0,p=r.length;u<p;u++){var f=r[u];if(f){var d="string"==typeof f;d&&!l&&(f=f.toLowerCase());var m=f instanceof RegExp;if(d||m){var v;s=!0;t:{for(var h=l,_=0,w=(v=n).length;_<w;_++){var T=h?v[_]:v[_].toLowerCase();if(m&&f.test(T)||d&&f===T){v=!0;break t}}v=!1}if(c&&v){n=!0;break e}if(i&&!v){n=!1;break e}}}}n=!c&&(i?!!s:void 0)}return n}var s="click",u="submit",p=[{category:u,types:[{type:"button",filter:{tagName:["input","button"],attr:{type:["submit","image"]}}}]},{category:s,types:[{type:"a",filter:{tagName:["a"],attr:{href:!0}}}]}],f="file",d="resource",m="submit",v="filter",h="stop",g=1,y=2,b=4,_=8,k=g,w={enabled:!0,modes:[{mode:u,categories:[{category:m,types:[{type:"lead",filter:[{inputsName:["phone"],inputsType:["tel"],rule:g},{inputsName:["email"],inputsType:["email"],rule:g}],filterRule:y,stop:{inputsName:{value:["password"]}}},{type:"form",filter:{inputsName:!0}}]}]},{mode:s,categories:[{category:"contact",types:[{type:"email",filter:{contactBy:["mailto"]}},{type:"phone",filter:{contactBy:["tel"]}}]},{category:f,types:[{type:"file",filter:{fileExtension:"7z bz2 gz apk iso cab dmg msi rar tar zip exe txt doc docx ppt pptx xls xlsx csv pdf psd rtf ods djvu eps 3gp aac ac3 avi flac flv divx midi mka mkv mp3 mp4 mpeg mpg mov ogg vob wav webm wma wmf wmv torrent".split(" ")}}]},{category:d,types:[{type:"outgoing",rule:_,stop:{domain:[Ge.getDomainMask(Ge.parse(Z.href,"domain"),3,!1)],href:[/password/]}},{type:"messenger",filter:{domain:Ge.getIsDomainRE("vk.me t.me telegram.me telegram.im web.telegram.org m.me web.whatsapp.com api.whatsapp.com chat.whatsapp.com wa.me".split(" "))},stop:{href:[/password/]}},{type:"social",filter:{domain:Ge.getIsDomainRE("vk.com vkontakte.ru m.vk.com vk.ru ok.ru m.ok.ru odnoklassniki.ru facebook.com m.facebook.com fb.com twitter.com linkedin.com instagram.com tiktok.com youtube.com youtu.be m.youtube.com".split(" "))},stop:{href:[/password/]}}]}]}]},T=1,E=13;return{enabled:!0,start:function(){e(Y,"click",t),e(Y,"keypress",t)}}}();de&&Fe.start();var Je=function(){function n(){r(null)}function r(e){for(var t in c(),e?(ce=e===K,z=e):z=ee&&null!==ce?ce?K:Z:Y.visibilityState,e=u(),ve)_(t,e)}function a(){if(!1!==re){for(var e in t(X,L,J),J=null,X.clearInterval(H),q=H=null,t(Y,P,F),F=null,ee&&(t(X,$,G),t(X,V,W),W=G=null),s(!0),de){var n=e,r=de[n];r&&(r=r.key,A(n),M(),delete de[n],C(null,r))}B=null,ae=[],oe=[],le={},de={},ve={},re=!1}}function l(e,t,n){var r=e+"_"+t;if(r in le)return!1;var a=u(),o=E(r,a,Qe);return t=le[r]={id:e||null,name:t,key:o,canUseInBackground:!!n,startTS:a,updateTS:a,timespent:{}},e?(oe.push(r),r=t.canUseInBackground,(t=ve[e])?!(n=t.isActive)&&(o=B&&i(e,B))&&(n=z===K||r)&&(t.updateTS=a,t.isActive=!0):(o=B&&i(e,B),n=z===K||r,ve[e]={isActive:o&&n,updateTS:a,timespent:{}})):ae.push(r),!0}function c(e,t){var n,r;2>arguments.length?(n=oe.concat(ae),r=j):(n=[e+"_"+t],r=O),f(n,r)}function s(e,t,n){var r=!1,i=[],a=[];2>arguments.length?(i=oe.slice(),(r=!!arguments[0])&&(i=i.concat(ae))):(r=e+"_"+t,-1!==oe.indexOf(r)?i=[r]:-1!==ae.indexOf(r)&&(n?i=[r]:a=[r])),f(i,U),f(a,O)}function f(e,t){var n,r,i,a=u(),o=[];for(n=0,r=e.length;n<r;n++)i=e[n],-1!==oe.indexOf(i)?d(i,t,a):-1!==ae.indexOf(i)&&o.push(i);for(n=0,r=o.length;n<r;n++)d(i=o[n],t,a);if(t===j&&(ie=a)-re>=ne){for(var l in le)v(l);for(l in de)(o=de[a=l])&&(A(a),C(a,o.key));re=ie}}function d(e,t,n){var r=le[e];if(r&&!1!==r.updateTS)if(r.timespent[z]=(r.timespent[z]||0)+(n-(r.updateTS||ie)),-1!==ae.indexOf(e)&&k(null,n),t===U)r.updateTS=!1,v(e);else if(t===D){var i;r.updateTS=n;e:{if(t=le[e])for(i in t.timespent)if(t.timespent[i]>te){i=!1;break e}i=!0}i?(m(e),M()):v(e)}else r.updateTS=t===j?null:n,m(e),M()}function m(e,t,n){if(!(a=le[e]))return null;var r=t||a.key;t=fe[r],fe[r]={uid:e,name:a.name,counterID:n||a.id||B,canUseInBackground:a.canUseInBackground,isActive:!1!==a.updateTS,startTime:a.startTS,timespent:{}},e=fe[r].timespent;var i,a=a.timespent;for(i in a)e[i]=a[i];if(n&&(n=ve[n])&&(r=fe[r]))for(var o in r.common={},r=r.common,n=n.timespent)r[o]=n[o];return t||null}function v(e){var t=le[e];t&&(m(e),h(e,t.key))}function h(e,t){if(r=fe[t])if(o(r.counterID)){var n=fe[t];if(n){var r,i,a,l,c,s=[];if(r=n.counterID)for(l=0,c=r.length;l<c;l++){i=E(t,a=r[l]),s.push(i);var u=void 0;(a=m(e||n.uid,i,a))&&(x((u=fe[i]).timespent,a.timespent),a.common&&(u.common=u.common||{},x(u.common,a.common)))}if(delete fe[t],M(),e&&e in le)if(n.isActive){for(y(e),l=0,c=r.length;l<c;l++)if(n=ve[r[l]])for(var p in n.timespent)n.timespent[p]=0}else b(e);for(l=0,c=s.length;l<c;l++)g(s[l])}}else(p=fe[t])&&((r=e&&e in le)&&!p.isActive&&b(e),s=g(t),r&&s&&p.isActive&&y(e))}function g(e){var t;if(t=fe[e]){var n=R(t.timespent);if(!1===t.canUseInBackground&&t.isActive&&0===n.fg)t=null;else{if(n=[t.name,t.startTime,t.canUseInBackground?1:0,n.fg,n.bg],t.common){var r=R(t.common);(r.fg||r.bg)&&n.push(r.fg,r.bg)}t={id:t.counterID,msg:n.join("/")}}}else t=!1;return!!t&&(n=";e="+escape("TS:"+t.msg),p(N({id:t.id},"/tracker",!1,!1)+n),delete fe[e],M(),!0)}function y(e){if(e=le[e])for(var t in e.timespent)e.timespent[t]=0}function b(e){if(e in le){var t;if(-1!==(t=ae.indexOf(e))&&ae.splice(t,1),-1!==(t=oe.indexOf(e))&&(oe.splice(t,1),t=le[e].id)){var n=ve[t];if(n){var r=n.isActive;r&&T(n,u()),(r=w(t,e))||(n.isActive=!1)}}delete le[e]}}function _(e,t){var n=ve[e];if(n){var r=B&&i(e,B),a=w(e);n.isActive=r&&a,n.updateTS=t}}function k(e,t){if(e){var n=ve[e];n&&(n.isActive?T(n,u()):n.updateTS=t)}else for(n in ve)k(n,t)}function w(e,t){for(var n in le)if(n!==t&&le[n].id===e&&(z===K||le[n].canUseInBackground))return!0;return!1}function T(e,t){e&&(e.timespent[z]=(e.timespent[z]||0)+(t-e.updateTS),e.updateTS=t)}function E(e){return[].join.call(arguments,"_")}function x(e,t){for(var n in t)e[n]=(e[n]||0)+(t[n]||0)}function R(e){var t,n=e[K]||0,r=0;for(t in e)t!==K&&(r+=e[t]);return{fg:n,bg:r}}function M(){if(Te){var e={};e[ue]=fe,e[pe]=me,S(se,ge(e)||"")}}function A(e){var t=de[e];t&&(me[t.key]={uid:e,name:t.name,counterID:t.id,value:t.value})}function C(e,t){if(me[t]){var n;if(n=me[t])if(0===n.value)n=null;else{var r=[n.name,n.value].join("/");n={id:n.counterID,msg:r}}else n=!1;n&&(r=";e="+escape("TS:"+n.msg),p(N({id:n.id},"/tracker",!1,!1)+r)),!1!==n&&(delete me[t],M()),n&&e&&(n=de[e])&&(n.value=0)}}var O=1,j=2,D=4,U=8,L=he?"pagehide":"unload",P="visibilitychange";"mozHidden"in Y?P="mozvisibilitychange":"webkitHidden"in Y?P="webkitvisibilitychange":"msHidden"in Y&&(P="msvisibilitychange");var $="focus",V="blur";"onfocusin"in Y&&($="focusin",V="focusout");var B,z,H,q,F,G,W,J,K="visible",Z="hidden",Q=["0"],ee=!1,te=100,ne=6e4,re=!1,ie=!1,ae=[],oe=[],le={},ce=null,se="tmr_tslog",ue="activity",pe="count",fe={},de={},me={},ve={};return{init:function(){if(Te){var e=ye(I(se)||"{}");fe=e[ue]||{},me=e[pe]||{}}for(var t in fe)h(null,t);for(t in me)C(null,t)},launch:function(){!1===re&&(re=u(),B=null,ie=u(),z=ee&&null!==ce?ce?K:Z:Y.visibilityState,J=a.bind(X),e(X,L,J),q=n.bind(X),H=X.setInterval(q,1e4),F=r.bind(X,null),e(Y,P,F),ee&&(G=r.bind(X,K),W=r.bind(X,Z),e(X,$,G),e(X,V,W)))},enable:function(e){if(B){if(i(e,B))return;f(ae,D)}else{for(var t=0,n=Q.length;t<n;t++)l(null,Q[t],!1);B=[]}B.push(e),_(e,u())},disable:function(e){if(B){var t;e:{t=0;for(var n=B.length;t<n;t++)if(B[t]==e)break e;t=-1}-1!==t&&(f(ae,D),B.splice(t,1),t=u(),e=ve[e])&&(e.isActive=!1,e.updateTS=t)}},startActivity:l,updateActivity:c,stopActivity:s,incCount:function(e,t){var n,r=e+"_"+t;if(!(n=de[r]))if(r in de)n=de[r];else{var i=E(t,n=u(),Qe);n=de[r]={id:e,name:t,key:i,startTS:n,value:0}}n&&n.id===e&&(n.value++,A(r),M())},defaultID:function(){return B?B[0]:void 0}}}(),Xe=!1,Ke="60.3.0",Ye=0,Ze=0,Qe=s(16),et=null,tt=null,nt=0,rt="tmr_reqNum",it=null;ke&&(null!==(it=w(rt)||null)&&E(rt,Ee)),Te&&null===it&&(it=I(rt)||null),it=null===it?0:parseInt(it,10),Te&&S(rt,it);var at=(ke?w("tmr_lvid"):null)||(Te?I("tmr_lvid"):null),ot=(ke?w("tmr_lvidTS"):null)||(Te?I("tmr_lvidTS"):null);null!==at&&-1!==at.search(/^[0-9a-fA-F]+$/)||(at=s(32)),x("tmr_lvid",at),null!==ot&&-1!==ot.search(/^\d+$/)||(ot=""+u()),x("tmr_lvidTS",ot);var lt,ct,st=0,ut=[],pt=[],ft=[],dt=[],mt={},vt="ontouchstart"in X||1<(K.maxTouchPoints||K.msMaxTouchPoints)?"1":"0",ht=X.devicePixelRatio||0,gt=X.top===X?0:1,yt=null,bt=X.performance||X.mozPerformance||X.msPerformance||X.webkitPerformance||{},_t=bt.timing||{},kt=bt.navigation||{},wt="unloadEventStart unloadEventEnd redirectStart redirectEnd fetchStart domainLookupStart domainLookupEnd connectStart connectEnd secureConnectionStart requestStart responseStart responseEnd domLoading domInteractive domContentLoadedEventStart domContentLoadedEventEnd domComplete loadEventStart loadEventEnd".split(" "),Tt=_t?_t.navigationStart:void 0,Et="downlink downlinkMax effectiveType rtt saveData type".split(" ");lt=function(e,t,n){if(t&&"object"==typeof t){var r,i="id"in t&&t.id||st,a=n.title||null,o=ct(t,{params:n.required,fn:n.fn});if(o.missed.length)console.warn("[TopMailRu]"+(i?"["+i+"]":"")+" Error#1.14","Unspecified "+(1<o.missed.length&&o.missed.slice(0,-1).join(", ")+" and "||"")+o.missed.slice(-1)+" in "+e);else{var l=ct(t,{params:n.optional,fn:n.fn});r=[].concat(o.values).concat(l.values),o=[].concat(o.missed).concat(l.missed),n.value&&(t="value"in t&&t.value,!0!==n.value&&(t=t||n.value),t?r.push("value: "+t):o.push("value")),n=r.length?"{ "+r.join(", ")+" }":"",r=o.length?"("+(1<o.length?o.slice(0,-1).join(", ")+" and "+o.slice(-1)+" are":o.slice(-1)+" is")+" empty)":"",i?console.info("[TopMailRu]["+i+"]: "+(a||e)+" "+n+" "+r):console.warn("[TopMailRu] Error#1.15","Undefined counter ID of "+e+" "+n)}}else console.warn("[TopMailRu][]["+e+"] Error#1.13")},ct=function(e,t){var n,r,i,a=[],o=[];if(t.params)for(n in t.params)if(t.params.hasOwnProperty(n)&&!1!==t.params[n])if(r=n in e&&e[n],!0!==t.params[n]&&(r=r||t.params[n]),r)try{i=t.fn?t.fn:null,a.push(n+': "'+(i?i(n,r):r)+'"')}catch(e){console.warn("[TopMailRu] Error#1.16",e)}else o&&o.push(n);return{values:a,missed:o}};var It={},St=[];j.prototype.callbackOnReady=function(e){le&&lt("onReady",e,{title:"OnReady callback"}),e&&"object"==typeof e&&"function"==typeof e.callback&&(e.callback.call(e.context||null),he&&St.push(e))},j.prototype.pageView=function(e){D(e);e:if(e&&"object"==typeof e&&e.id){5>pt.length&&!i(e.id,pt)&&(pt.push(e.id),!1!==e.beat&&ft.push(e.id),ut.push(e),Se&&M(e)),he&&(mt[e.id]=l(!0,{},e),mt[e.id].bfCache=!0),"detectBlocker"in e&&!e.detectBlocker&&(pe=!0);var t="string"==typeof e.ecommerce,n=t&&-1!==e.ecommerce.search(/\S/);if(5>dt.length&&!i(e.id,dt)&&(!0===e.ecommerce||t&&!n||t&&n||!1!==e.ecommerce&&!t&&(i(e.id,Pe)||!i(e.id,Ne)))){if(dt.push(e.id),t&&n){if(Ue&&(Ie(e.ecommerce),je!==e.ecommerce)){je=e.ecommerce,Ce&&(Ce=[0,0,je]);break e}je=e.ecommerce,Ce&&(Ce=[0,0,je])}if(t=[e.id],Ue){n=0;for(var r=Le.length;n<r;n++)A(t,Le[n])}}e.timespent?Je.enable(e.id):Je.disable(e.id),Xe&&5>pt.length&&O([e.id])}le&&lt("pageView",e,{title:"Page view",optional:{url:Z.href}}),P(e)&&(p(N(e,"/counter",!1,!0)),Ze=u())},j.prototype.reachGoal=function(e){if(D(e),le&&lt("reachGoal",e,{title:"Reach goal",value:!0,required:{goal:!0}}),P(e)&&"goal"in e&&e.goal){var t="value"in e&&e.value&&parseInt(e.value)||"";p(N(e,"/tracker",!1,!0)+";e="+escape("RG:"+t+"/"+e.goal))}};var xt="VALUE";j.prototype.itemView=function(e){if(le&&lt("itemView",e,{title:"Item view",optional:{list:!0,pagetype:!0,productid:!0,totalvalue:!0},fn:function(e,t){return(""+t).replace(/;/g," ")}}),P(e)){var t=e.list||"",n=e.productid||"",r=e.pagetype||"",i=e.totalvalue||0,a=function(e,t,n,r){return!t||!r||r===xt&&t===xt&&n===xt?null:(t={goal:Rt+t,value:n||0,params:{product_id:r}},e&&(t.id=e),t)}(e.id,r,i,n);a&&this.reachGoal(a),(new Image).src="https://ad.mail.ru/retarget/?counter="+(e.id||st)+"&list="+t+"&productid="+n+"&pagetype="+r+"&totalvalue="+i+"&_="+Math.random(),t="IV:"+i+"/"+(""+t).replace(/;/g," ")+";"+(""+n).replace(/;/g," ")+";"+(""+r).replace(/;/g," "),p(N(e,"/tracker",!1,!0)+";e="+escape(t))}};var Rt="vk_ecom_";j.prototype.sendEvent=function(e){if(D(e),le&&lt("sendEvent",e,{title:"Send event",value:!0,required:{category:!0,action:!0},optional:{label:!0},fn:function(e,t){return(""+t).substring(0,300).replace(/;/g," ")}}),P(e)&&"category"in e&&e.category&&"action"in e&&e.action){var t=(""+e.category).substring(0,300),n=(""+e.action).substring(0,300),r="label"in e&&e.label?(""+e.label).substring(0,300):"";t="CE:"+("value"in e&&e.value&&parseInt(e.value)||"")+"/"+(""+t).replace(/;/g," ")+";"+(""+n).replace(/;/g," ")+";"+(""+r).replace(/;/g," ");p(N(e,"/tracker",!1,!0)+";e="+escape(t))}},j.prototype.setUserID=function(e){if(null===e||!1===e||void 0===e)this.deleteUserID();else{var t=typeof e;"number"!==t&&"string"!==t?le&&console.warn("[TopMailRu] Error#1.17","Invalid user ID in setUserID"):(et=e,le&&console.info("[TopMailRu]: Global user ID = "+et))}},j.prototype.getUserID=function(){return et||0===et?et:void 0},j.prototype.deleteUserID=function(){et=null,le&&console.info("[TopMailRu]: Reset global user ID to null")},j.prototype.setUserParams=function(e){if(null===e||!1===e||void 0===e)this.deleteUserParams();else if(a(e)){try{tt=l(!0,{},e)}catch(e){return void(le&&console.warn("[TopMailRu] Error#1.22","Invalid user params in setUserParams"))}le&&console.info("[TopMailRu]: Global user params = "+ge(tt))}else le&&console.warn("[TopMailRu] Error#1.21","Invalid user params in setUserParams")},j.prototype.getUserParams=function(){var e=tt||void 0;return e?l(!0,{},e):void 0},j.prototype.deleteUserParams=function(){tt=null,le&&console.info("[TopMailRu]: Reset global user params to null")},j.prototype.getClientID=function(){return at||0===at?at:void 0},j.prototype._MT_event=function(e,t,n){D(e),le&&lt(t,e,{title:n}),P(e)&&p(N(e,"/tracker",!1,!0)+";e="+escape("MT:/"+t))},j.prototype.miniAppEvent=function(e){this._MT_event(e,"miniAppEvent","VK Mini App Event")};var Mt=function(e,t){if(fe){var n=Je.defaultID();P(e,n)&&(a(e)&&"activity"in e&&e.activity?Je.startActivity(e.id||n,""+e.activity,null===t?!!e.canUseInBackground:t):le&&console.warn("[TopMailRu] Error#1.27","Invalid startActivity command: ID of activity is required"))}};j.prototype.startTimespent=function(e){Mt(e,null)},j.prototype.startForegroundTimespent=function(e){Mt(e,!1)},j.prototype.startAnytimeTimespent=function(e){Mt(e,!0)},j.prototype.updateTimespent=function(e){if(fe){var t=Je.defaultID();P(e,t)&&(a(e)&&"activity"in e&&e.activity?"number"==typeof e.activity||"string"==typeof e.activity?Je.updateActivity(e.id||t,""+e.activity):le&&console.warn("[TopMailRu] Error#1.28","Invalid updateActivity command: ID of activity should be number or string"):Je.updateActivity())}},j.prototype.stopTimespent=function(e){if(fe){var t=Je.defaultID();P(e,t)&&(a(e)&&"activity"in e&&e.activity?"number"==typeof e.activity||"string"==typeof e.activity?Je.stopActivity(e.id||t,""+e.activity,!1):le&&console.warn("[TopMailRu] Error#1.29","Invalid stopActivity command: ID of activity should be number or string"):Je.stopActivity(!1))}},j.prototype.incrementEventTimespent=function(e){if(fe){var t=Je.defaultID();P(e,t)&&(e&&"activity"in e&&e.activity?Je.incCount(e.id||t,""+e.activity):le&&console.warn("[TopMailRu] Error#1.31","Invalid incrementEventTimespent command: ID of countable activity is required"))}},j.prototype.processEvent=function(e,t){if(e&&"object"==typeof e)if("type"in e){if("onready"===e.type){if(t&&0>t)return;this.callbackOnReady(e)}else if(t&&0<t)return;switch(e.type){case"pageView":this.pageView(e);break;case"reachGoal":this.reachGoal(e);break;case"itemView":this.itemView(e);break;case"sendEvent":this.sendEvent(e);break;case"setUserID":"userid"in e&&this.setUserID(e.userid);break;case"deleteUserID":this.deleteUserID();break;case"setUserParams":"params"in e&&this.setUserParams(e.params);break;case"deleteUserParams":this.deleteUserParams();break;case"miniAppEvent":this.miniAppEvent(e);break;case"startTimespent":this.startTimespent(e);break;case"startForegroundTimespent":this.startForegroundTimespent(e);break;case"startAnytimeTimespent":this.startAnytimeTimespent(e);break;case"updateTimespent":this.updateTimespent(e);break;case"stopTimespent":this.stopTimespent(e);break;case"incrementEventTimespent":this.incrementEventTimespent(e)}}else le&&console.warn("[TopMailRu] Error#1.19","Unspecified type of push event");else le&&console.warn("[TopMailRu] Error#1.18","Invalid push event")},j.prototype.push=function(e){for(var t=0,n=arguments.length;t<n;t++)this.processEvent(arguments[t])};var At=!1;j.prototype.onready=function(){At||(At=!0,!pe&&!Se&&Ae(V,B),Ie(je))};var Ct=!1;j.prototype.onload=function(){if(!Ct){if(Ct=!0,nt=u(),!ee&&0<ut.length){for(var e=";e="+escape("RT/load")+";et="+nt,t=0;t<ut.length;t++)p(N(ut[t],"/tracker",!0,!0)+e);Ze=nt}se||(It.pvt2=setTimeout((function(){$(2)}),2e3)),ue||(It.pvt15=setTimeout((function(){$(15)}),15e3))}},j.prototype.beat=function(){if(!ce&&Ye){var e=u();if(!(12e4<e-Ye)){if(12e4<e-Ze)for(var t=";e="+escape("RT/resend")+";et="+nt,n=0;n<ut.length;n++)!1!==ut[n].beat&&p(N(ut[n],"/tracker",!1,!0)+t);else 0<ft.length&&p("/tracker?"+_({js:"13",id:ft[0],e:"RT/beat",sid:Qe,ids:ft.join(),ver:Ke,_:Math.random()},";"));Ze=e}}};var Ot=!1;j.prototype.unload=function(){if(!Ot){if(Ot=!0,!ee){var e;if(e=(e=L())?u()-e:void 0,e=";e="+escape("RT/unload")+";et="+u()+(e?";pvt="+escape(e):""),qe.support){var t=qe.getLog();e+=";vtauto="+t.auto}for(t=0;t<ut.length;t++)p(N(ut[t],"/tracker",!1,!0)+e)}he&&(It.pvt2&&(clearTimeout(It.pvt2),delete It.pvt2),It.pvt15&&(clearTimeout(It.pvt15),delete It.pvt15),It.beat&&(clearInterval(It.beat),delete It.beat))}},j.prototype.activity=function(e){Ye=u()};var jt=_tmr;_tmr=new j,fe&&Je.init();for(var Dt,Ut=0,Lt=jt.length;Ut<Lt;Ut++)(Dt=jt[Ut])&&"object"==typeof Dt&&D(Dt);for(Ut=0,Lt=jt.length;Ut<Lt;Ut++)Dt=jt[Ut],_tmr.processEvent(Dt,1);for(Ut=0,Lt=jt.length;Ut<Lt;Ut++)Dt=jt[Ut],_tmr.processEvent(Dt,-1);if("complete"===Y.readyState||"loading"!==Y.readyState&&!Y.documentElement.doScroll?(_tmr.onready(),W()):Y.addEventListener?e(Y,"DOMContentLoaded",q):Y.attachEvent&&e(Y,"readystatechange",q),"complete"===Y.readyState?_tmr.onload():e(X,he?"pageshow":"load",F),he?e(X,"pagehide",G):(e(X,"unload",G),e(X,"beforeunload",G)),H(),!ce)try{var Pt="scroll gesturechange touchmove mousedown mousemove mouseup touch".split(" "),Nt=function(t){e(Y,t,(function(){_tmr.activity(t)}))};for(Ut=0;Ut<Pt.length;Ut++)Nt(Pt[Ut]);e(X,"scroll",(function(){_tmr.activity("scallback")}))}catch(e){le&&console.warn("[TopMailRu] Error#1.20",e)}}var $t,Vt}();