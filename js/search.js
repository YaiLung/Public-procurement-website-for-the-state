var $serpBlockId=$("#serp-block-id");function cancelBookmarkForm(a){var t=$(a),e=t.parents(".js-subformListItem").jsAttr("name"),o=t.parents(".js-widget-FormSubformList").data("bcWidget"),s=".js-name-"+e;o&&o.$tabsBox&&o.$tabsBox.find(s).click()}function bookmarkParameters(a,t,e){if("fav"===(e=e))var o="/tc/search/ajax-save-search-template123456/";else if("subscribe"===e)o="/tc/subscribe/ajax-save-from-search/";var s=$("#status-message-"+e),i=$("span#"+e+"Form");if(0==i.length||i.data("loading"))return!1;function n(a){a=$.extend({loading:!1,closable:!0},a||{});s.removeClass();var t='<div class="text">'+a.text+"</div>";t+=a.closable?'<i onclick="$(this).parent().slideUp(\'fast\');" class="icon-close"></i><span></span>':"",s.addClass(a.type+"-block").html(t).show(),a.loading&&s.addClass("loader");var e=s.data("msgTimeoutId");e&&clearTimeout(e),a.timeout&&(e=setTimeout((function(){s.slideUp("fast")}),a.timeout),s.data("msgTimeoutId",e))}function c(a){return n(a=$.extend(a||{},{type:"error",closable:!0,loading:!1,timeout:5e3}))}if(s.removeClass(),0===a.toString().length)return c({text:"Введите название."}),n(),!1;i.data("loading",!0),n({text:"Загрузка...",type:"info",loading:!0,closable:!1}),i.hide("fast"),$.ajax({type:"POST",url:o,data:{caption:a,condition:t},cache:!1,dataType:"json",statusCode:{500:function(){c({text:"Введите название."}),i.data("loading",!1)}}}).done((function(a){var t="success";"ok"!==a.status&&(t="error"),n({text:a.data.msg,type:t,loading:!1,closable:!1}),i.hide("fast"),i.data("loading",!1)})).fail((function(){c({text:"Введите название."}),i.data("loading",!1),i.show("fast")}))}$serpBlockId.on("Bc-tabSelectorClick",(function(a,t){t.$tabSelector.data("authorisation-needed")&&showAuthorization("extraFunctions")})),$serpBlockId.on("Bc-afterTabShow",(function(a,t){if(0!==t.$item.length){var e=$("#serp-block-id"),o=t.obj.$tabsBox.find("li");o.children("i").removeClass("icon-up icon-down hover"),o.not(".active").each((function(){s($(this),"open","icon-down")})),o.filter(".active").each((function(){s($(this),"close","icon-up hover")})),t.$item.is(":visible")?e.addClass("opened"):e.removeClass("opened")}function s(a,t,e){var o=a.data(t+"-text"),s=a.data(t+"-class"),i=a.data("remove-class"),n="open"===t?"close":"open";if(a.children("i").addClass(e),null!=o){var c=$("span.text",a);a.data(n+"-text")||a.data(n+"-text",c.text()),c.text(o)}i&&a.removeClass(i),s&&(a.addClass(s),a.data("remove-class",s))}}));